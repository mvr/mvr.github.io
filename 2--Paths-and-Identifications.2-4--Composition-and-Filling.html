<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>2.4: Composition and Filling - Introduction to Homotopy Type Theory in Cubical Agda</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/css/Agda.css">
        <link rel="stylesheet" href="theme/css/Agda-highlight.css">
        <link rel="stylesheet" href="theme/pagetoc.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "coal" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="index.html">Introduction</a></li><li class="chapter-item affix "><a href="INSTALLING_AGDA.html">Installing Agda</a></li><li class="chapter-item affix "><a href="USING_AGDA.html">Using Agda</a></li><li class="chapter-item affix "><li class="part-title">Type Theory</li><li class="chapter-item "><a href="1--Type-Theory.1-1--Types-and-Functions.html">1.1: Types and Functions</a></li><li class="chapter-item "><a href="1--Type-Theory.1-2--Inductive-Types.html">1.2: Inductive Types</a></li><li class="chapter-item "><a href="1--Type-Theory.1-3--Universes-and-More-Inductive-Types.html">1.3: Universes and More Inductive Types</a></li><li class="chapter-item "><a href="1--Type-Theory.1-4--Record-Types-and-Copatterns.html">1.4: Record Types and Copatterns</a></li><li class="chapter-item "><a href="1--Type-Theory.1-5--Propositions-as-Types.html">1.5: Propositions as Types</a></li><li class="chapter-item affix "><li class="part-title">Paths and Identifications</li><li class="chapter-item "><a href="2--Paths-and-Identifications.2-1--Paths.html">2.1: Paths</a></li><li class="chapter-item "><a href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html">2.2: Equivalences and Path Algebra</a></li><li class="chapter-item "><a href="2--Paths-and-Identifications.2-3--Substitution-and-J.html">2.3: Substitution and J</a></li><li class="chapter-item expanded "><a href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html" class="active">2.4: Composition and Filling</a></li><li class="chapter-item "><a href="2--Paths-and-Identifications.2-5--Transport.html">2.5: Transport</a></li><li class="chapter-item "><a href="2--Paths-and-Identifications.2-6--Univalence.html">2.6: Univalence</a></li><li class="chapter-item "><a href="2--Paths-and-Identifications.2-7--Propositions.html">2.7: Propositions</a></li><li class="chapter-item "><a href="2--Paths-and-Identifications.2-8--Sets-and-Higher-Types.html">2.8: Sets and Higher Types</a></li><li class="chapter-item "><a href="2--Paths-and-Identifications.2-9--Contractible-Maps.html">2.9: Contractible Maps</a></li><li class="chapter-item affix "><li class="part-title">Topics</li><li class="chapter-item "><a href="3--Topics.3-1--Structure-Identity-Principle.html">3.1: The Structure Identity Principle</a></li><li class="chapter-item "><a href="3--Topics.3-2--Modalities.html">3.2: Modalities</a></li><li class="chapter-item "><a href="3--Topics.3-3--Constructive-Logic.html">3.3: Constructive Logic</a></li><li class="chapter-item affix "><li class="part-title">Behind-the-Scenes</li><li class="chapter-item "><a href="Library.Primitive.html">Primitives</a></li><li class="chapter-item "><a href="Library.Prelude.html">Prelude</a></li><li class="chapter-item "><a href="Library.Univalence.html">Univalence</a></li><li class="spacer"></li><li class="chapter-item affix "><a href="UNICODE_DICTIONARY.html">Unicode Dictionary</a></li><li class="chapter-item affix "><a href="ACKNOWLEDGEMENTS.html">Acknowledgements</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <!-- <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li> -->
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Introduction to Homotopy Type Theory in Cubical Agda</h1>

                    <div class="right-buttons">
                        <a href="https://github.com/CQTS/introduction-to-cubical" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                  <main>
                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<!--
<pre class="Agda"><a id="10" class="Keyword">module</a> <a id="17" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html" class="Module">2--Paths-and-Identifications.2-4--Composition-and-Filling</a> <a id="75" class="Keyword">where</a>

<a id="82" class="Keyword">open</a> <a id="87" class="Keyword">import</a> <a id="94" href="Library.Prelude.html" class="Module">Library.Prelude</a>
<a id="110" class="Keyword">open</a> <a id="115" class="Keyword">import</a> <a id="122" href="1--Type-Theory.1-1--Types-and-Functions.html" class="Module">1--Type-Theory.1-1--Types-and-Functions</a>
<a id="162" class="Keyword">open</a> <a id="167" class="Keyword">import</a> <a id="174" href="1--Type-Theory.1-2--Inductive-Types.html" class="Module">1--Type-Theory.1-2--Inductive-Types</a>
<a id="210" class="Keyword">open</a> <a id="215" class="Keyword">import</a> <a id="222" href="1--Type-Theory.1-3--Universes-and-More-Inductive-Types.html" class="Module">1--Type-Theory.1-3--Universes-and-More-Inductive-Types</a>
<a id="277" class="Keyword">open</a> <a id="282" class="Keyword">import</a> <a id="289" href="1--Type-Theory.1-5--Propositions-as-Types.html" class="Module">1--Type-Theory.1-5--Propositions-as-Types</a>
<a id="331" class="Keyword">open</a> <a id="336" class="Keyword">import</a> <a id="343" href="2--Paths-and-Identifications.2-1--Paths.html" class="Module">2--Paths-and-Identifications.2-1--Paths</a>
<a id="383" class="Keyword">open</a> <a id="388" class="Keyword">import</a> <a id="395" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html" class="Module">2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra</a>
<a id="459" class="Keyword">open</a> <a id="464" class="Keyword">import</a> <a id="471" href="2--Paths-and-Identifications.2-3--Substitution-and-J.html" class="Module">2--Paths-and-Identifications.2-3--Substitution-and-J</a>

<a id="525" class="Keyword">private</a>
  <a id="535" class="Keyword">variable</a>
    <a id="548" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#548" class="Generalizable">ℓ</a> <a id="550" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#550" class="Generalizable">ℓ&#39;</a> <a id="553" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#553" class="Generalizable">ℓ&#39;&#39;</a> <a id="557" class="Symbol">:</a> <a id="559" href="Library.Primitive.html#1060" class="Postulate">Level</a>
    <a id="569" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a> <a id="571" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#571" class="Generalizable">B</a> <a id="573" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#573" class="Generalizable">C</a> <a id="575" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#575" class="Generalizable">D</a> <a id="577" class="Symbol">:</a> <a id="579" href="Library.Primitive.html#422" class="Primitive">Type</a> <a id="584" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#548" class="Generalizable">ℓ</a>
    <a id="590" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a> <a id="592" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a> <a id="594" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#594" class="Generalizable">z</a> <a id="596" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#596" class="Generalizable">w</a> <a id="598" class="Symbol">:</a> <a id="600" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a>
</pre>-->
<h1 id="lecture-2-4-composition-and-filling"><a class="header" href="#lecture-2-4-composition-and-filling">Lecture 2-4: Composition and Filling</a></h1>
<p>Cubical Agda adds a number of primitive notions that make working with
paths-between-paths easier. To understand how they work, we will
really have to start putting the “cubical” in Cubical Agda.</p>
<p>In this lecture, we will learn about partial elements (open boxes) and
composition (filling those open boxes). Before we dive into all these
cubical features, it will be worth exploring an analogue in the more
familiar Boolean world.</p>
<h2 id="warm-up-boolean-partial-elements"><a class="header" href="#warm-up-boolean-partial-elements">Warm-up: Boolean Partial Elements</a></h2>
<p>Let’s revisit our function <code class="Agda"><a href="1--Type-Theory.1-5--Propositions-as-Types.html#2556" class="Function">IsTrue</a></code> which converts a Boolean into a
type. Recall that we defined <code>IsTrue true</code> to be <code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#8971" class="Datatype">⊤</a></code>, with its
element <code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#8988" class="InductiveConstructor">tt</a></code> a proof that <code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1042" class="InductiveConstructor">true</a></code> is in fact <code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1042" class="InductiveConstructor">true</a></code>. And we
defined <code>IsTrue false</code> to be <code class="Agda"><a href="1--Type-Theory.1-3--Universes-and-More-Inductive-Types.html#6308" class="Datatype">∅</a></code>, since there should be no way to
prove that <code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1057" class="InductiveConstructor">false</a></code> is <code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1042" class="InductiveConstructor">true</a></code>. Let’s give a special name to the
element <code>tt : IsTrue true</code> to help us remember. (Yes, this is a bit
silly.)</p>
<pre class="Agda"><a id="IsTrue-true"></a><a id="1539" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1539" class="Function">IsTrue-true</a> <a id="1551" class="Symbol">:</a> <a id="1553" href="1--Type-Theory.1-5--Propositions-as-Types.html#2556" class="Function">IsTrue</a> <a id="1560" href="1--Type-Theory.1-2--Inductive-Types.html#1042" class="InductiveConstructor">true</a>
<a id="1565" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1539" class="Function">IsTrue-true</a> <a id="1577" class="Symbol">=</a> <a id="1579" href="1--Type-Theory.1-2--Inductive-Types.html#8988" class="InductiveConstructor">tt</a>
</pre>
<p>A <em>Boolean partial element</em> of a type <code>A</code> is an element of <code>A</code> which
exists only conditionally, with the condition being some Boolean <code>φ</code>.</p>
<pre class="Agda"><a id="BooleanPartial"></a><a id="1731" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1731" class="Function">BooleanPartial</a> <a id="1746" class="Symbol">:</a> <a id="1748" href="1--Type-Theory.1-2--Inductive-Types.html#1022" class="Datatype">Bool</a> <a id="1753" class="Symbol">→</a> <a id="1755" href="Library.Primitive.html#422" class="Primitive">Type</a> <a id="1760" class="Symbol">→</a> <a id="1762" href="Library.Primitive.html#422" class="Primitive">Type</a>
<a id="1767" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1731" class="Function">BooleanPartial</a> <a id="1782" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1782" class="Bound">φ</a> <a id="1784" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1784" class="Bound">A</a> <a id="1786" class="Symbol">=</a> <a id="1788" href="1--Type-Theory.1-5--Propositions-as-Types.html#2556" class="Function">IsTrue</a> <a id="1795" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1782" class="Bound">φ</a> <a id="1797" class="Symbol">→</a> <a id="1799" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1784" class="Bound">A</a>
</pre>
<p>Any actual element of <code>A</code> is also a partially defined one: if it
always exists, then it certainly still exists when <code>φ</code> happens to be
<code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1042" class="InductiveConstructor">true</a></code>.</p>
<pre class="Agda"><a id="just"></a><a id="1955" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1955" class="Function">just</a> <a id="1960" class="Symbol">:</a> <a id="1962" class="Symbol">{</a><a id="1963" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1963" class="Bound">A</a> <a id="1965" class="Symbol">:</a> <a id="1967" href="Library.Primitive.html#422" class="Primitive">Type</a><a id="1971" class="Symbol">}</a> <a id="1973" class="Symbol">{</a><a id="1974" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1974" class="Bound">φ</a> <a id="1976" class="Symbol">:</a> <a id="1978" href="1--Type-Theory.1-2--Inductive-Types.html#1022" class="Datatype">Bool</a><a id="1982" class="Symbol">}</a> <a id="1984" class="Symbol">→</a> <a id="1986" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1963" class="Bound">A</a> <a id="1988" class="Symbol">→</a> <a id="1990" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1731" class="Function">BooleanPartial</a> <a id="2005" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1974" class="Bound">φ</a> <a id="2007" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1963" class="Bound">A</a>
<a id="2009" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1955" class="Function">just</a> <a id="2014" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#2014" class="Bound">a</a> <a id="2016" class="Symbol">=</a> <a id="2018" class="Symbol">λ</a> <a id="2020" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#2020" class="Bound">_</a> <a id="2022" class="Symbol">→</a> <a id="2024" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#2014" class="Bound">a</a>
</pre>
<p>And there’s always the completely undefined element of <code>A</code> which is
defined when <code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1057" class="InductiveConstructor">false</a></code> is <code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1042" class="InductiveConstructor">true</a></code>, i.e., never.</p>
<pre class="Agda"><a id="nothing"></a><a id="2153" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#2153" class="Function">nothing</a> <a id="2161" class="Symbol">:</a> <a id="2163" class="Symbol">{</a><a id="2164" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#2164" class="Bound">A</a> <a id="2166" class="Symbol">:</a> <a id="2168" href="Library.Primitive.html#422" class="Primitive">Type</a><a id="2172" class="Symbol">}</a> <a id="2174" class="Symbol">→</a> <a id="2176" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1731" class="Function">BooleanPartial</a> <a id="2191" href="1--Type-Theory.1-2--Inductive-Types.html#1057" class="InductiveConstructor">false</a> <a id="2197" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#2164" class="Bound">A</a>
<a id="2199" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#2153" class="Function">nothing</a> <a id="2207" class="Symbol">=</a> <a id="2209" href="1--Type-Theory.1-3--Universes-and-More-Inductive-Types.html#6971" class="Function">∅-rec</a>
</pre>
<p>Now, you might wonder at the utility of these definitions. After all,
if <code>φ</code> is <code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1042" class="InductiveConstructor">true</a></code>, then <code>BooleanPartial φ A</code> is <code>⊤ → A</code>, which is
equivalent to <code>A</code>. If <code>φ</code> is <code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1057" class="InductiveConstructor">false</a></code>, then <code>BooleanPartial φ A</code> is <code>∅ → A</code>, which is equivalent to <code>⊤</code>. In other words, this type is either
equivalent to <code>A</code> or <code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#8971" class="Datatype">⊤</a></code>, depending on whether <code>φ</code> is <code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1042" class="InductiveConstructor">true</a></code> or
<code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1057" class="InductiveConstructor">false</a></code> — what’s the big deal?</p>
<p>The reason that <code class="Agda"><a href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1731" class="Function">BooleanPartial</a></code> is an interesting type is that,
when we use it, we don’t think of <code>φ</code> as representing a single Boolean
value; we think of <code>φ</code> as representing a Boolean <em>formula</em>. That is,
we will usually be using this type <em>in context</em> and in that case, <code>φ</code>
can be some formula involving other Booleans (or other things
entirely).</p>
<p>Consider this function which divides a natural number evenly in two,
for example.</p>
<pre class="Agda"><a id="halfOf"></a><a id="3041" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3041" class="Function">halfOf</a> <a id="3048" class="Symbol">:</a> <a id="3050" class="Symbol">(</a><a id="3051" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3051" class="Bound">n</a> <a id="3053" class="Symbol">:</a> <a id="3055" href="Library.Prelude.html#3629" class="Datatype">ℕ</a><a id="3056" class="Symbol">)</a> <a id="3058" class="Symbol">→</a> <a id="3060" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1731" class="Function">BooleanPartial</a> <a id="3075" class="Symbol">(</a><a id="3076" href="1--Type-Theory.1-2--Inductive-Types.html#12646" class="Function">isEven</a> <a id="3083" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3051" class="Bound">n</a><a id="3084" class="Symbol">)</a> <a id="3086" href="Library.Prelude.html#3629" class="Datatype">ℕ</a>
<a id="3088" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3041" class="Function">halfOf</a> <a id="3095" href="Library.Prelude.html#3646" class="InductiveConstructor">zero</a>          <a id="3109" class="Symbol">=</a> <a id="3111" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1955" class="Function">just</a> <a id="3116" href="Library.Prelude.html#3646" class="InductiveConstructor">zero</a>         <a id="3129" class="Comment">-- half of 0 is 0</a>
<a id="3147" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3041" class="Function">halfOf</a> <a id="3154" class="Symbol">(</a><a id="3155" href="Library.Prelude.html#3657" class="InductiveConstructor">suc</a> <a id="3159" href="Library.Prelude.html#3646" class="InductiveConstructor">zero</a><a id="3163" class="Symbol">)</a>    <a id="3168" class="Symbol">=</a> <a id="3170" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#2153" class="Function">nothing</a>           <a id="3188" class="Comment">-- half of 1 is not defined</a>
<a id="3216" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3041" class="Function">halfOf</a> <a id="3223" class="Symbol">(</a><a id="3224" href="Library.Prelude.html#3657" class="InductiveConstructor">suc</a> <a id="3228" class="Symbol">(</a><a id="3229" href="Library.Prelude.html#3657" class="InductiveConstructor">suc</a> <a id="3233" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3233" class="Bound">n</a><a id="3234" class="Symbol">))</a> <a id="3237" class="Symbol">=</a> <a id="3239" href="Library.Prelude.html#3657" class="InductiveConstructor">suc</a> <a id="3243" href="1--Type-Theory.1-3--Universes-and-More-Inductive-Types.html#3978" class="Function Operator">∘</a> <a id="3245" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3041" class="Function">halfOf</a> <a id="3252" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3233" class="Bound">n</a>    <a id="3257" class="Comment">-- half of (n + 2) is one more than half of n</a>
</pre>
<p>This function cannot produce a natural number on every input, since
not every input can be divided evenly in two. We can, however, think
of <code>halfOf n</code> as a <em>partially defined</em> element of <code class="Agda"><a href="Library.Prelude.html#3629" class="Datatype">ℕ</a></code>; specifically,
<code>halfOf n</code> is only well-defined when <code>isEven n</code> is <code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1042" class="InductiveConstructor">true</a></code> — or, in
other words, <code>IsTrue-true : IsTrue (isEven n)</code> using our definitions
above.</p>
<p>Here’s another example of a partially defined element, which shows
what can happen when <code>φ</code> is a Boolean formula.</p>
<pre class="Agda"><a id="zeroOrOne-Partial"></a><a id="3783" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3783" class="Function">zeroOrOne-Partial</a> <a id="3801" class="Symbol">:</a> <a id="3803" class="Symbol">(</a><a id="3804" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3804" class="Bound">b</a> <a id="3806" class="Symbol">:</a> <a id="3808" href="1--Type-Theory.1-2--Inductive-Types.html#1022" class="Datatype">Bool</a><a id="3812" class="Symbol">)</a> <a id="3814" class="Symbol">→</a> <a id="3816" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1731" class="Function">BooleanPartial</a> <a id="3831" class="Symbol">(</a><a id="3832" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3804" class="Bound">b</a> <a id="3834" href="1--Type-Theory.1-2--Inductive-Types.html#4051" class="Function Operator">or</a> <a id="3837" class="Symbol">(</a><a id="3838" href="1--Type-Theory.1-2--Inductive-Types.html#1637" class="Function">not</a> <a id="3842" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3804" class="Bound">b</a><a id="3843" class="Symbol">))</a> <a id="3846" href="Library.Prelude.html#3629" class="Datatype">ℕ</a>
<a id="3848" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3783" class="Function">zeroOrOne-Partial</a> <a id="3866" href="1--Type-Theory.1-2--Inductive-Types.html#1042" class="InductiveConstructor">true</a> <a id="3871" class="Symbol">=</a> <a id="3873" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1955" class="Function">just</a> <a id="3878" href="Library.Prelude.html#3646" class="InductiveConstructor">zero</a>
<a id="3883" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3783" class="Function">zeroOrOne-Partial</a> <a id="3901" href="1--Type-Theory.1-2--Inductive-Types.html#1057" class="InductiveConstructor">false</a> <a id="3907" class="Symbol">=</a> <a id="3909" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1955" class="Function">just</a> <a id="3914" class="Symbol">(</a><a id="3915" href="Library.Prelude.html#3657" class="InductiveConstructor">suc</a> <a id="3919" href="Library.Prelude.html#3646" class="InductiveConstructor">zero</a><a id="3923" class="Symbol">)</a>
</pre>
<p>We can ask whether a partial element <code>p</code> <em>extends</em> to an fully defined
element <code>x</code>. That is, is there an <code>x : A</code> so that <code>p ≡ just x</code>? In
this case, we say that “<code>x</code> <em>extends</em> <code>p</code>”. For <code class="Agda"><a href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3783" class="Function">zeroOrOne-Partial</a></code>
we can say the answer is yes.</p>
<pre class="Agda"><a id="zeroOrOne-Total"></a><a id="4173" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4173" class="Function">zeroOrOne-Total</a> <a id="4189" class="Symbol">:</a> <a id="4191" href="1--Type-Theory.1-2--Inductive-Types.html#1022" class="Datatype">Bool</a> <a id="4196" class="Symbol">→</a> <a id="4198" href="Library.Prelude.html#3629" class="Datatype">ℕ</a>
<a id="4200" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4173" class="Function">zeroOrOne-Total</a> <a id="4216" href="1--Type-Theory.1-2--Inductive-Types.html#1042" class="InductiveConstructor">true</a> <a id="4221" class="Symbol">=</a> <a id="4223" href="Library.Prelude.html#3646" class="InductiveConstructor">zero</a>
<a id="4228" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4173" class="Function">zeroOrOne-Total</a> <a id="4244" href="1--Type-Theory.1-2--Inductive-Types.html#1057" class="InductiveConstructor">false</a> <a id="4250" class="Symbol">=</a> <a id="4252" href="Library.Prelude.html#3657" class="InductiveConstructor">suc</a> <a id="4256" href="Library.Prelude.html#3646" class="InductiveConstructor">zero</a>

<a id="zeroOrOne-PartialExtends"></a><a id="4262" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4262" class="Function">zeroOrOne-PartialExtends</a> <a id="4287" class="Symbol">:</a> <a id="4289" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3783" class="Function">zeroOrOne-Partial</a> <a id="4307" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="4309" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1955" class="Function">just</a> <a id="4314" href="1--Type-Theory.1-3--Universes-and-More-Inductive-Types.html#3978" class="Function Operator">∘</a> <a id="4316" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4173" class="Function">zeroOrOne-Total</a>
<a id="4332" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4262" class="Function">zeroOrOne-PartialExtends</a> <a id="4357" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4357" class="Bound">i</a> <a id="4359" href="1--Type-Theory.1-2--Inductive-Types.html#1042" class="InductiveConstructor">true</a> <a id="4364" class="Symbol">=</a> <a id="4366" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1955" class="Function">just</a> <a id="4371" href="Library.Prelude.html#3646" class="InductiveConstructor">zero</a>
<a id="4376" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4262" class="Function">zeroOrOne-PartialExtends</a> <a id="4401" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4401" class="Bound">i</a> <a id="4403" href="1--Type-Theory.1-2--Inductive-Types.html#1057" class="InductiveConstructor">false</a> <a id="4409" class="Symbol">=</a> <a id="4411" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1955" class="Function">just</a> <a id="4416" class="Symbol">(</a><a id="4417" href="Library.Prelude.html#3657" class="InductiveConstructor">suc</a> <a id="4421" href="Library.Prelude.html#3646" class="InductiveConstructor">zero</a><a id="4425" class="Symbol">)</a>
</pre>
<p>In the case of <code class="Agda"><a href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#3041" class="Function">halfOf</a></code> above, the answer is no — not every
natural number can be evenly divided in half.</p>
<p>Here’s a practical exercise in Boolean partial functions. Write a
function which takes the first <code>n</code> elements of a list, as long as the
list has at least <code>n</code> elements.</p>
<pre class="Agda"><a id="_≤_"></a><a id="4716" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4716" class="Function Operator">_≤_</a> <a id="4720" class="Symbol">:</a> <a id="4722" href="Library.Prelude.html#3629" class="Datatype">ℕ</a> <a id="4724" class="Symbol">→</a> <a id="4726" href="Library.Prelude.html#3629" class="Datatype">ℕ</a> <a id="4728" class="Symbol">→</a> <a id="4730" href="1--Type-Theory.1-2--Inductive-Types.html#1022" class="Datatype">Bool</a>
<a id="4735" href="Library.Prelude.html#3646" class="InductiveConstructor">zero</a> <a id="4740" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4716" class="Function Operator">≤</a> <a id="4742" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4742" class="Bound">m</a> <a id="4744" class="Symbol">=</a> <a id="4746" href="1--Type-Theory.1-2--Inductive-Types.html#1042" class="InductiveConstructor">true</a>
<a id="4751" href="Library.Prelude.html#3657" class="InductiveConstructor">suc</a> <a id="4755" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4755" class="Bound">n</a> <a id="4757" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4716" class="Function Operator">≤</a> <a id="4759" href="Library.Prelude.html#3646" class="InductiveConstructor">zero</a> <a id="4764" class="Symbol">=</a> <a id="4766" href="1--Type-Theory.1-2--Inductive-Types.html#1057" class="InductiveConstructor">false</a>
<a id="4772" href="Library.Prelude.html#3657" class="InductiveConstructor">suc</a> <a id="4776" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4776" class="Bound">n</a> <a id="4778" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4716" class="Function Operator">≤</a> <a id="4780" href="Library.Prelude.html#3657" class="InductiveConstructor">suc</a> <a id="4784" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4784" class="Bound">m</a> <a id="4786" class="Symbol">=</a> <a id="4788" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4776" class="Bound">n</a> <a id="4790" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4716" class="Function Operator">≤</a> <a id="4792" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4784" class="Bound">m</a>

<a id="take"></a><a id="4795" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4795" class="Function">take</a> <a id="4800" class="Symbol">:</a> <a id="4802" class="Symbol">(</a><a id="4803" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4803" class="Bound">n</a> <a id="4805" class="Symbol">:</a> <a id="4807" href="Library.Prelude.html#3629" class="Datatype">ℕ</a><a id="4808" class="Symbol">)</a> <a id="4810" class="Symbol">(</a><a id="4811" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4811" class="Bound">L</a> <a id="4813" class="Symbol">:</a> <a id="4815" href="1--Type-Theory.1-2--Inductive-Types.html#15363" class="Datatype">List</a> <a id="4820" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a><a id="4821" class="Symbol">)</a> <a id="4823" class="Symbol">→</a> <a id="4825" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1731" class="Function">BooleanPartial</a> <a id="4840" class="Symbol">(</a><a id="4841" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4803" class="Bound">n</a> <a id="4843" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4716" class="Function Operator">≤</a> <a id="4845" href="1--Type-Theory.1-2--Inductive-Types.html#17618" class="Function">length</a> <a id="4852" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#4811" class="Bound">L</a><a id="4853" class="Symbol">)</a> <a id="4855" class="Symbol">(</a><a id="4856" href="1--Type-Theory.1-2--Inductive-Types.html#15363" class="Datatype">List</a> <a id="4861" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a><a id="4862" class="Symbol">)</a>
<a id="4864" class="Comment">-- Exercise:</a>
<a id="4877" class="Comment">-- take n L = {!!}</a>

<a id="5071" class="Comment">-- mvrnote: tests</a>
</pre>
<h2 id="cubical-partial-elements"><a class="header" href="#cubical-partial-elements">Cubical Partial Elements</a></h2>
<p>Now we come to partial elements defined on intervals. As we saw in
Lecture 2-X, the interval <code class="Agda"><a href="Library.Primitive.html#1675" class="Datatype">I</a></code> has the structure of a De Morgan
algebra. This lets us write down logical formulas with cubical
variables, like <code>i ∨ (j ∧ ~ k)</code>. Thinking of <code class="Agda"><a href="Library.Primitive.html#1675" class="Datatype">I</a></code> as the
topological unit interval <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>, this formula is meant to represent
the function <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">max</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">min</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">))</span></span></span></span>; thinking logically, it seems
to say “<code>i</code> or (<code>j</code> and not <code>k</code>)”. It will be useful to take both
perspectives.</p>
<p>Similarly to the Booleans, we will say that a formula like <code>i ∨ (j ∧ ~ k)</code> is “true” when it equals <code>i1</code>. This corresponds to a subset of the
cube <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span>, namely, the set <span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">max</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">min</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">}</span><span class="mord">.</span></span></span></span></span> We can therefore think of these interval formulas as
describing “subsets of cubes <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span>”, even though <code class="Agda"><a href="Library.Primitive.html#1675" class="Datatype">I</a></code> isn’t actually
a set that we can take subsets of.</p>
<p>For example, the formula <code>i ∨ ~ i</code> (which can be read “<code>i</code> or not
<code>i</code>”) should correspond to the subset <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">max</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span>, which a bit of thinking shows is the subset of the interval
consisting of the endpoints <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">}</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>. We will therefore
think of the formula <code>i ∨ ~ i</code> as defining the part of the interval
consisting only of the endpoints <code class="Agda"><a href="Library.Primitive.html#1723" class="InductiveConstructor">i0</a></code> and <code class="Agda"><a href="Library.Primitive.html#1771" class="InductiveConstructor">i1</a></code>.</p>
<p>Since <code>i ∨ ~ i</code> is a common pattern, it’s reasonable to give it a
name. We call it <code>∂ i</code>, since <code class="Agda"><a href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a></code> typically means “boundary” in
mathematics.</p>
<pre class="Agda"><a id="∂"></a><a id="6524" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="6526" class="Symbol">:</a> <a id="6528" href="Library.Primitive.html#1675" class="Datatype">I</a> <a id="6530" class="Symbol">→</a> <a id="6532" href="Library.Primitive.html#1675" class="Datatype">I</a>
<a id="6534" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="6536" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6536" class="Bound">i</a> <a id="6538" class="Symbol">=</a> <a id="6540" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6536" class="Bound">i</a> <a id="6542" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="6544" href="Library.Prelude.html#359" class="Primitive Operator">~</a> <a id="6546" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6536" class="Bound">i</a>
</pre>
<p>Corresponding to <code class="Agda"><a href="1--Type-Theory.1-5--Propositions-as-Types.html#2556" class="Function">IsTrue</a></code> for Booleans, Agda uses a built-in type
family <code>I → Type</code> called <code class="Agda"><a href="Library.Primitive.html#2485" class="Postulate">IsOne</a></code> (roughly). And corresponding to
<code class="Agda"><a href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#1731" class="Function">BooleanPartial</a></code>, Agda provides a primitive type former <code>Partial φ A</code> where <code>φ : I</code> is an element of the interval — thought of as a
formula — and <code>A</code> is a type. Interpreting the formula <code>φ</code> as
describing part of a cube, the type <code>Partial φ A</code> is then functions
from that piece of the cube to <code>A</code>.</p>
<p>We can see that <code>i ∨ ~ i</code> really behaves like the endpoints of the
interval by defining a <code class="Agda"><a href="Library.Primitive.html#3205" class="Primitive">Partial</a></code> element on it which sends <code class="Agda"><a href="Library.Primitive.html#1723" class="InductiveConstructor">i0</a></code> to
<code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1042" class="InductiveConstructor">true</a></code> and <code class="Agda"><a href="Library.Primitive.html#1771" class="InductiveConstructor">i1</a></code> to <code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1057" class="InductiveConstructor">false</a></code>:</p>
<pre class="Agda"><a id="trueOrFalse"></a><a id="7169" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#7169" class="Function">trueOrFalse</a> <a id="7181" class="Symbol">:</a> <a id="7183" class="Symbol">(</a><a id="7184" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#7184" class="Bound">i</a> <a id="7186" class="Symbol">:</a> <a id="7188" href="Library.Primitive.html#1675" class="Datatype">I</a><a id="7189" class="Symbol">)</a> <a id="7191" class="Symbol">→</a> <a id="7193" href="Library.Primitive.html#3205" class="Primitive">Partial</a> <a id="7201" class="Symbol">(</a><a id="7202" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#7184" class="Bound">i</a> <a id="7204" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="7206" href="Library.Prelude.html#359" class="Primitive Operator">~</a> <a id="7208" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#7184" class="Bound">i</a><a id="7209" class="Symbol">)</a> <a id="7211" href="1--Type-Theory.1-2--Inductive-Types.html#1022" class="Datatype">Bool</a>
<a id="7216" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#7169" class="Function">trueOrFalse</a> <a id="7228" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#7228" class="Bound">i</a> <a id="7230" class="Symbol">(</a><a id="7231" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#7228" class="Bound">i</a> <a id="7233" class="Symbol">=</a> <a id="7235" href="Library.Primitive.html#1723" class="InductiveConstructor">i0</a><a id="7237" class="Symbol">)</a> <a id="7239" class="Symbol">=</a> <a id="7241" href="1--Type-Theory.1-2--Inductive-Types.html#1042" class="InductiveConstructor">true</a>
<a id="7246" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#7169" class="Function">trueOrFalse</a> <a id="7258" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#7258" class="Bound">i</a> <a id="7260" class="Symbol">(</a><a id="7261" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#7258" class="Bound">i</a> <a id="7263" class="Symbol">=</a> <a id="7265" href="Library.Primitive.html#1771" class="InductiveConstructor">i1</a><a id="7267" class="Symbol">)</a> <a id="7269" class="Symbol">=</a> <a id="7271" href="1--Type-Theory.1-2--Inductive-Types.html#1057" class="InductiveConstructor">false</a>
</pre>
<p>This uses some built-in Agda syntax to “pattern match” on the hidden
element of <code>IsOne (i ∨ ~ i)</code>. Agda checks that all of the formula is
covered, so the above definition fails if one of the lines is omitted.
And in more complicated situations, Agda makes sure that the different
cases are exactly equal wherever they overlap. (We’ll see this below.)</p>
<p>We can’t turn <code class="Agda"><a href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#7169" class="Function">trueOrFalse</a></code> into a <em>total</em> element of
<code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1022" class="Datatype">Bool</a></code> which is <code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1042" class="InductiveConstructor">true</a></code> on <code class="Agda"><a href="Library.Primitive.html#1723" class="InductiveConstructor">i0</a></code> and <code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1057" class="InductiveConstructor">false</a></code>
on <code class="Agda"><a href="Library.Primitive.html#1771" class="InductiveConstructor">i1</a></code>; there is no way to jump from <code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1042" class="InductiveConstructor">true</a></code> to
<code class="Agda"><a href="1--Type-Theory.1-2--Inductive-Types.html#1057" class="InductiveConstructor">false</a></code> as we move along the interval. (We proved this in
<code class="Agda"><a href="2--Paths-and-Identifications.2-3--Substitution-and-J.html#2490" class="Function">true≢false</a></code>).</p>
<p>But because the partial element only has to be defined on the
endpoints, we can say what the values of <code class="Agda"><a href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#7169" class="Function">trueOrFalse</a></code> on those
endpoints are and not worry about what happens in between.</p>
<p>For a more interesting partial element, consider an open box:</p>
<pre><code>    ∙         ∙
    ^         ^              ^    
    |         |            j |        
    |         |              ∙ — &gt;    
    ∙ — — — &gt; ∙                i      
</code></pre>
<p>This open box is part of a square, so we are in the context of two
interval variables <code>i j : I</code>. Now we need to figure out how to
describe the open box as a formula, which is to say, as a function
into <code>I</code>.</p>
<pre class="Agda"><a id="open-box"></a><a id="8523" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8523" class="Function">open-box</a> <a id="8532" class="Symbol">:</a> <a id="8534" href="Library.Primitive.html#1675" class="Datatype">I</a> <a id="8536" class="Symbol">→</a> <a id="8538" href="Library.Primitive.html#1675" class="Datatype">I</a> <a id="8540" class="Symbol">→</a> <a id="8542" href="Library.Primitive.html#1675" class="Datatype">I</a>
<a id="8544" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8523" class="Function">open-box</a> <a id="8553" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8553" class="Bound">i</a> <a id="8555" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8555" class="Bound">j</a> <a id="8557" class="Symbol">=</a>
<a id="8559" class="Comment">-- (continued below)</a>
</pre>
<p>We want an expression <code>open-box i j : I</code> which equals <code>i1</code> exactly
when the coordinates <code>(i, j)</code> lie on the open box. Now, <code>i</code> and <code>j</code>
are in the open box if they are in the left of the box, the right of
the box, or the bottom of the box. So our <code>φ i j</code> will be the “union”</p>
<pre class="Agda">  <a id="8866" class="Symbol">(</a><a id="8867" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8938" class="Function">right-of-box</a> <a id="8880" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8553" class="Bound">i</a> <a id="8882" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8555" class="Bound">j</a><a id="8883" class="Symbol">)</a> <a id="8885" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="8887" class="Symbol">(</a><a id="8888" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8966" class="Function">left-of-box</a> <a id="8900" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8553" class="Bound">i</a> <a id="8902" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8555" class="Bound">j</a><a id="8903" class="Symbol">)</a> <a id="8905" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="8907" class="Symbol">(</a><a id="8908" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8993" class="Function">bottom-of-box</a> <a id="8922" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8553" class="Bound">i</a> <a id="8924" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8555" class="Bound">j</a><a id="8925" class="Symbol">)</a>
  <a id="8929" class="Keyword">where</a>
   <a id="8938" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8938" class="Function">right-of-box</a> <a id="8951" class="Symbol">:</a> <a id="8953" href="Library.Primitive.html#1675" class="Datatype">I</a> <a id="8955" class="Symbol">→</a> <a id="8957" href="Library.Primitive.html#1675" class="Datatype">I</a> <a id="8959" class="Symbol">→</a> <a id="8961" href="Library.Primitive.html#1675" class="Datatype">I</a>
   <a id="8966" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8966" class="Function">left-of-box</a> <a id="8978" class="Symbol">:</a> <a id="8980" href="Library.Primitive.html#1675" class="Datatype">I</a> <a id="8982" class="Symbol">→</a> <a id="8984" href="Library.Primitive.html#1675" class="Datatype">I</a> <a id="8986" class="Symbol">→</a> <a id="8988" href="Library.Primitive.html#1675" class="Datatype">I</a>
   <a id="8993" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8993" class="Function">bottom-of-box</a> <a id="9007" class="Symbol">:</a> <a id="9009" href="Library.Primitive.html#1675" class="Datatype">I</a> <a id="9011" class="Symbol">→</a> <a id="9013" href="Library.Primitive.html#1675" class="Datatype">I</a> <a id="9015" class="Symbol">→</a> <a id="9017" href="Library.Primitive.html#1675" class="Datatype">I</a>
</pre>
<p>of those three sides. Now, <code>(i, j)</code> is on the right of the box just
when <code>i = i1</code>.</p>
<pre class="Agda">   <a id="9115" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8938" class="Function">right-of-box</a> <a id="9128" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#9128" class="Bound">i</a> <a id="9130" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#9130" class="Bound">j</a> <a id="9132" class="Symbol">=</a> <a id="9134" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#9128" class="Bound">i</a>
</pre>
<p>Similarly, <code>(i, j)</code> is on the left of the box when <code>i = i0</code>, or in
other words when <code>~ i = i1</code>.</p>
<pre class="Agda">   <a id="9245" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8966" class="Function">left-of-box</a> <a id="9257" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#9257" class="Bound">i</a> <a id="9259" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#9259" class="Bound">j</a> <a id="9261" class="Symbol">=</a> <a id="9263" href="Library.Prelude.html#359" class="Primitive Operator">~</a> <a id="9265" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#9257" class="Bound">i</a>
</pre>
<p>Finally, <code>(i, j)</code> is on the bottom of the box when <code>j = i0</code>, or when
<code>~ j = i1</code>, so</p>
<pre class="Agda">   <a id="9364" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8993" class="Function">bottom-of-box</a> <a id="9378" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#9378" class="Bound">i</a> <a id="9380" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#9380" class="Bound">j</a> <a id="9382" class="Symbol">=</a> <a id="9384" href="Library.Prelude.html#359" class="Primitive Operator">~</a> <a id="9386" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#9380" class="Bound">j</a>
</pre>
<p>This completes our definition of the function <code>open-box : I → I → I</code>.
There was no need to split it out, we could have simply written a
single formula</p>
<pre class="Agda"><a id="open-box&#39;"></a><a id="9549" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#9549" class="Function">open-box&#39;</a> <a id="9559" class="Symbol">:</a> <a id="9561" href="Library.Primitive.html#1675" class="Datatype">I</a> <a id="9563" class="Symbol">→</a> <a id="9565" href="Library.Primitive.html#1675" class="Datatype">I</a> <a id="9567" class="Symbol">→</a> <a id="9569" href="Library.Primitive.html#1675" class="Datatype">I</a>
<a id="9571" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#9549" class="Function">open-box&#39;</a> <a id="9581" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#9581" class="Bound">i</a> <a id="9583" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#9583" class="Bound">j</a> <a id="9585" class="Symbol">=</a> <a id="9587" class="Symbol">(</a><a id="9588" href="Library.Prelude.html#359" class="Primitive Operator">~</a> <a id="9590" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#9581" class="Bound">i</a><a id="9591" class="Symbol">)</a> <a id="9593" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="9595" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#9581" class="Bound">i</a> <a id="9597" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="9599" class="Symbol">(</a><a id="9600" href="Library.Prelude.html#359" class="Primitive Operator">~</a> <a id="9602" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#9583" class="Bound">j</a><a id="9603" class="Symbol">)</a>
</pre>
<p>Try it yourself: describe a formula which gives the two sides of a box</p>
<pre><code>    ∙         ∙
    ^         ^              ^
    |         |            j |
    |         |              ∙ — &gt;
    ∙         ∙                i
</code></pre>
<pre class="Agda"><a id="sides-of-square"></a><a id="9853" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#9853" class="Function">sides-of-square</a> <a id="9869" class="Symbol">:</a> <a id="9871" href="Library.Primitive.html#1675" class="Datatype">I</a> <a id="9873" class="Symbol">→</a> <a id="9875" href="Library.Primitive.html#1675" class="Datatype">I</a> <a id="9877" class="Symbol">→</a> <a id="9879" href="Library.Primitive.html#1675" class="Datatype">I</a>
<a id="9881" class="Comment">-- Exercise:</a>
<a id="9894" class="Comment">-- sides-of-square i j = {!!}</a>
</pre>
<p>How about a three dimensional example. Come up with a formula to
describe this part of the cube consisting of the bottom face and the
three sides shown in the picture</p>
<pre><code>            ∙                   ∙
          / ^                 / ^
        /   |               /   |
      /     |             /     |
    ∙ — — — — — — — — &gt; .       |
    ^       |           ^       |                    ^   j
    |       |           |       |                  k | /
    |       |           |       |                    ∙ — &gt;
    |       |           |       |                      i
    |       . — — — — — | — — &gt; ∙
    |     /             |     /
    |   /               |   /
    | /                 | /
    ∙ — — — — — — — — &gt; ∙
</code></pre>
<pre class="Agda"><a id="exercise-shape"></a><a id="10763" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#10763" class="Function">exercise-shape</a> <a id="10778" class="Symbol">:</a> <a id="10780" href="Library.Primitive.html#1675" class="Datatype">I</a> <a id="10782" class="Symbol">→</a> <a id="10784" href="Library.Primitive.html#1675" class="Datatype">I</a> <a id="10786" class="Symbol">→</a> <a id="10788" href="Library.Primitive.html#1675" class="Datatype">I</a> <a id="10790" class="Symbol">→</a> <a id="10792" href="Library.Primitive.html#1675" class="Datatype">I</a>
<a id="10794" class="Comment">-- Exercise:</a>
<a id="10807" class="Comment">-- exercise-shape i j k = {!!}</a>
</pre>
<h2 id="extensibility-and-composition"><a class="header" href="#extensibility-and-composition">Extensibility and Composition</a></h2>
<p>Just as we did for Boolean partial elements, we can ask whether a
partial element defined on some part of a cube can be extended to the
whole cube. The partial element <code class="Agda"><a href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#7169" class="Function">trueOrFalse</a></code> above definitely
cannot extend to a whole element, since a whole element <code>p i : Bool</code>
for <code>i : I</code> for which <code>p i0 = true</code> and <code>p i1 = false</code> would be a path
<code>true ≡ false</code>, something we’ve already checked is contradictory in
<code class="Agda"><a href="2--Paths-and-Identifications.2-3--Substitution-and-J.html#2490" class="Function">true≢false</a></code>.</p>
<p>However, Agda bakes in guarantees that certain partial elements can be
extended to total ones. In short, Agda allows us to “close off open
boxes” using an operation called <code class="Agda"><a href="Library.Prelude.html#650" class="Function">hcomp</a></code> (which stands for
“homogeneous composition”). An open box is a part of the cube which
contains the entire bottom face and some pieces of the side walls.</p>
<div class="info">
<p><span class="info-label">Aside:</span>
Every element of a type universe <code>Type ℓ</code> is supports <code class="Agda"><a href="Library.Prelude.html#650" class="Function">hcomp</a></code>, and
that encompasses almost every type that we use in practice. For
technical reasons, some of Agda’s back-end plumbing types do not
support <code class="Agda"><a href="Library.Prelude.html#650" class="Function">hcomp</a></code>. The only ones that get mentioned in these notes are
the interval <code class="Agda"><a href="Library.Primitive.html#1675" class="Datatype">I</a></code> itself, the <code class="Agda"><a href="Library.Primitive.html#2485" class="Postulate">IsOne</a></code> predicate, and partial
elements <code class="Agda"><a href="Library.Primitive.html#3253" class="Primitive">PartialP</a></code>. The types for which <code class="Agda"><a href="Library.Prelude.html#650" class="Function">hcomp</a></code> works are called
<em>fibrant</em> types, taking a name from homotopy theory. The types for
which <code class="Agda"><a href="Library.Prelude.html#650" class="Function">hcomp</a></code> fails live in their own universe hierarchy <code class="Agda"><a href="Library.Primitive.html#583" class="Primitive">SSet</a></code>.</p>
</div>
<p>Let’s see an example, which implements a crucial operation on paths:
path composition. The most natural notion of path composition in our
cubical setting is “double composition”, which composes three paths in
a line</p>
<pre><code>    r         p         q
w — — — &gt; x — — — &gt; y — — — &gt; z
</code></pre>
<p>by drawing them as three sides of a square:</p>
<pre><code>      w         z
      ^         ^            ^
sym r |         | q        j |
      |         |            ∙ — &gt;
      x — — — &gt; y              i
           p
</code></pre>
<p>We can represent this open box as a partial element:</p>
<pre class="Agda"><a id="double-comp-box"></a><a id="12836" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12836" class="Function">double-comp-box</a> <a id="12852" class="Symbol">:</a> <a id="12854" class="Symbol">{</a><a id="12855" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12855" class="Bound">x</a> <a id="12857" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12857" class="Bound">y</a> <a id="12859" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12859" class="Bound">z</a> <a id="12861" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12861" class="Bound">w</a> <a id="12863" class="Symbol">:</a> <a id="12865" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a><a id="12866" class="Symbol">}</a>
  <a id="12870" class="Symbol">→</a> <a id="12872" class="Symbol">(</a><a id="12873" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12873" class="Bound">r</a> <a id="12875" class="Symbol">:</a> <a id="12877" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12861" class="Bound">w</a> <a id="12879" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="12881" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12855" class="Bound">x</a><a id="12882" class="Symbol">)</a> <a id="12884" class="Symbol">(</a><a id="12885" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12885" class="Bound">p</a> <a id="12887" class="Symbol">:</a> <a id="12889" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12855" class="Bound">x</a> <a id="12891" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="12893" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12857" class="Bound">y</a><a id="12894" class="Symbol">)</a> <a id="12896" class="Symbol">(</a><a id="12897" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12897" class="Bound">q</a> <a id="12899" class="Symbol">:</a> <a id="12901" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12857" class="Bound">y</a> <a id="12903" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="12905" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12859" class="Bound">z</a><a id="12906" class="Symbol">)</a>
  <a id="12910" class="Symbol">→</a> <a id="12912" class="Symbol">(</a><a id="12913" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12913" class="Bound">i</a> <a id="12915" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12915" class="Bound">j</a> <a id="12917" class="Symbol">:</a> <a id="12919" href="Library.Primitive.html#1675" class="Datatype">I</a><a id="12920" class="Symbol">)</a> <a id="12922" class="Symbol">→</a> <a id="12924" href="Library.Primitive.html#3205" class="Primitive">Partial</a> <a id="12932" class="Symbol">(</a><a id="12933" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#8523" class="Function">open-box</a> <a id="12942" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12913" class="Bound">i</a> <a id="12944" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12915" class="Bound">j</a><a id="12945" class="Symbol">)</a> <a id="12947" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a>
<a id="12949" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12836" class="Function">double-comp-box</a> <a id="12965" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12965" class="Bound">r</a> <a id="12967" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12967" class="Bound">p</a> <a id="12969" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12969" class="Bound">q</a> <a id="12971" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12971" class="Bound">i</a> <a id="12973" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12973" class="Bound">j</a> <a id="12975" class="Symbol">(</a><a id="12976" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12971" class="Bound">i</a> <a id="12978" class="Symbol">=</a> <a id="12980" href="Library.Primitive.html#1723" class="InductiveConstructor">i0</a><a id="12982" class="Symbol">)</a> <a id="12984" class="Symbol">=</a> <a id="12986" class="Symbol">(</a><a id="12987" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#24347" class="Function">sym</a> <a id="12991" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12965" class="Bound">r</a><a id="12992" class="Symbol">)</a> <a id="12994" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12973" class="Bound">j</a>
<a id="12996" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12836" class="Function">double-comp-box</a> <a id="13012" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13012" class="Bound">r</a> <a id="13014" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13014" class="Bound">p</a> <a id="13016" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13016" class="Bound">q</a> <a id="13018" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13018" class="Bound">i</a> <a id="13020" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13020" class="Bound">j</a> <a id="13022" class="Symbol">(</a><a id="13023" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13018" class="Bound">i</a> <a id="13025" class="Symbol">=</a> <a id="13027" href="Library.Primitive.html#1771" class="InductiveConstructor">i1</a><a id="13029" class="Symbol">)</a> <a id="13031" class="Symbol">=</a> <a id="13033" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13016" class="Bound">q</a> <a id="13035" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13020" class="Bound">j</a>
<a id="13037" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12836" class="Function">double-comp-box</a> <a id="13053" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13053" class="Bound">r</a> <a id="13055" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13055" class="Bound">p</a> <a id="13057" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13057" class="Bound">q</a> <a id="13059" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13059" class="Bound">i</a> <a id="13061" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13061" class="Bound">j</a> <a id="13063" class="Symbol">(</a><a id="13064" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13061" class="Bound">j</a> <a id="13066" class="Symbol">=</a> <a id="13068" href="Library.Primitive.html#1723" class="InductiveConstructor">i0</a><a id="13070" class="Symbol">)</a> <a id="13072" class="Symbol">=</a> <a id="13074" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13055" class="Bound">p</a> <a id="13076" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13059" class="Bound">i</a>
</pre>
<p>We want to cap this box to get a path <code>w ≡ z</code>. This exactly what
<code class="Agda"><a href="Library.Prelude.html#650" class="Function">hcomp</a></code> does: speaking loosely, we have</p>
<pre><code>hcomp (the formula for where the sides are) 
      (the partial box)
  : (the type of full top face)
</code></pre>
<p>For this particular cube we get the “double composite” of the input
paths, which we will write as <code>r ∙∙ p ∙∙ q</code>.</p>
<pre class="Agda"><a id="_∙∙_∙∙_"></a><a id="13423" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13423" class="Function Operator">_∙∙_∙∙_</a> <a id="13431" class="Symbol">:</a> <a id="13433" class="Symbol">(</a><a id="13434" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13434" class="Bound">r</a> <a id="13436" class="Symbol">:</a> <a id="13438" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#596" class="Generalizable">w</a> <a id="13440" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="13442" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a><a id="13443" class="Symbol">)</a> <a id="13445" class="Symbol">→</a> <a id="13447" class="Symbol">(</a><a id="13448" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13448" class="Bound">p</a> <a id="13450" class="Symbol">:</a> <a id="13452" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a> <a id="13454" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="13456" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a><a id="13457" class="Symbol">)</a> <a id="13459" class="Symbol">→</a> <a id="13461" class="Symbol">(</a><a id="13462" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13462" class="Bound">q</a> <a id="13464" class="Symbol">:</a> <a id="13466" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a> <a id="13468" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="13470" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#594" class="Generalizable">z</a><a id="13471" class="Symbol">)</a> <a id="13473" class="Symbol">→</a> <a id="13475" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#596" class="Generalizable">w</a> <a id="13477" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="13479" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#594" class="Generalizable">z</a>
<a id="13481" class="Symbol">(</a><a id="13482" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13482" class="Bound">r</a> <a id="13484" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13423" class="Function Operator">∙∙</a> <a id="13487" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13487" class="Bound">p</a> <a id="13489" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13423" class="Function Operator">∙∙</a> <a id="13492" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13492" class="Bound">q</a><a id="13493" class="Symbol">)</a> <a id="13495" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13495" class="Bound">i</a> <a id="13497" class="Symbol">=</a> <a id="13499" href="Library.Prelude.html#650" class="Function">hcomp</a> <a id="13505" class="Symbol">(</a><a id="13506" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="13508" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13495" class="Bound">i</a><a id="13509" class="Symbol">)</a> <a id="13511" class="Symbol">(</a><a id="13512" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12836" class="Function">double-comp-box</a> <a id="13528" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13482" class="Bound">r</a> <a id="13530" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13487" class="Bound">p</a> <a id="13532" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13492" class="Bound">q</a> <a id="13534" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13495" class="Bound">i</a><a id="13535" class="Symbol">)</a>
</pre>
<p>Writing more formally, <code class="Agda"><a href="Library.Prelude.html#650" class="Function">hcomp</a></code> takes in two arguments:</p>
<ul>
<li>
<p>A formula <code>φ : I</code>, specifying which sides of the box are going to be
present in the next argument.</p>
<p>For the double composite, we are specifying the left and right sides
of the square, that is, the places where where <code>∂ i</code> holds.</p>
</li>
<li>
<p>An open box <code>box : (j : I) → Partial (φ ∨ ~ j) A</code>. We can think of
<code>box</code> as specifying a vertical slice of the open box as <code>j</code> runs
from <code class="Agda"><a href="Library.Primitive.html#1723" class="InductiveConstructor">i0</a></code> to <code class="Agda"><a href="Library.Primitive.html#1771" class="InductiveConstructor">i1</a></code>. Each vertical slice will be defined in more
or fewer places depending on the formula <code>φ</code>. When <code>j</code> is <code class="Agda"><a href="Library.Primitive.html#1723" class="InductiveConstructor">i0</a></code>,
the formula <code>φ ∨ ~ j</code> always holds and so these vertical slices are
all defined when <code>j = i0</code>.</p>
<p>For the double composite, <code>box j</code> is totally defined when <code>i = i0</code>,
because we are on the left side of the square in that case, and
similarly when <code>i = i1</code> and we are on the right side of the square.
Otherwise, we only know for sure that <code>box j</code> is defined when <code>j = i0</code>, in which case we are on the bottom of the square.</p>
</li>
</ul>
<p>And the result is an element <code>hcomp φ box : A</code> with the following
guarantee:</p>
<ul>
<li>
<p>If the formula <code>φ</code> holds, then <code>hcomp φ box</code> is identical to the
value of <code>box i1</code>, which we know is defined because <code>box</code> is known
to be defined when <code>φ</code> holds.</p>
<p>For the double composite, there are two places where <code>φ</code> holds: <code>i = i0</code> and <code>i = i1</code>. When <code>i = i0</code>, the value of <code>box i1</code> is <code>(sym r) i1 = r i0 = w</code>. When <code>i = i1</code>, the value of <code>box i1</code> is <code>q i1 = z</code>.</p>
</li>
</ul>
<p>This guarantee is the reason Agda knows that our definition is
actually a path <code>w ≡ z</code>!</p>
<div class="info">
<p><span class="info-label">Aside:</span>
We can use a pattern-matching <code>λ</code> to inline the definition of the
sides of the box when doing an <code class="Agda"><a href="Library.Prelude.html#650" class="Function">hcomp</a></code>. This is the same as
defining the sides separately, it just avoids giving them a name.</p>
<pre class="Agda"><a id="double-comp-inline"></a><a id="15305" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15305" class="Function">double-comp-inline</a> <a id="15324" class="Symbol">:</a> <a id="15326" class="Symbol">(</a><a id="15327" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15327" class="Bound">r</a> <a id="15329" class="Symbol">:</a> <a id="15331" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#596" class="Generalizable">w</a> <a id="15333" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="15335" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a><a id="15336" class="Symbol">)</a> <a id="15338" class="Symbol">(</a><a id="15339" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15339" class="Bound">p</a> <a id="15341" class="Symbol">:</a> <a id="15343" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a> <a id="15345" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="15347" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a><a id="15348" class="Symbol">)</a> <a id="15350" class="Symbol">(</a><a id="15351" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15351" class="Bound">q</a> <a id="15353" class="Symbol">:</a> <a id="15355" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a> <a id="15357" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="15359" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#594" class="Generalizable">z</a><a id="15360" class="Symbol">)</a> <a id="15362" class="Symbol">→</a> <a id="15364" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#596" class="Generalizable">w</a> <a id="15366" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="15368" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#594" class="Generalizable">z</a>
<a id="15370" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15305" class="Function">double-comp-inline</a> <a id="15389" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15389" class="Bound">r</a> <a id="15391" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15391" class="Bound">p</a> <a id="15393" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15393" class="Bound">q</a> <a id="15395" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15395" class="Bound">i</a> 
  <a id="15400" class="Symbol">=</a> <a id="15402" href="Library.Prelude.html#650" class="Function">hcomp</a> <a id="15408" class="Symbol">(</a><a id="15409" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="15411" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15395" class="Bound">i</a><a id="15412" class="Symbol">)</a> <a id="15414" class="Symbol">(λ</a> <a id="15417" class="Symbol">{</a> <a id="15419" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15419" class="Bound">j</a> <a id="15421" class="Symbol">(</a><a id="15422" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15395" class="Bound">i</a> <a id="15424" class="Symbol">=</a> <a id="15426" href="Library.Primitive.html#1723" class="InductiveConstructor">i0</a><a id="15428" class="Symbol">)</a> <a id="15430" class="Symbol">→</a> <a id="15432" class="Symbol">(</a><a id="15433" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#24347" class="Function">sym</a> <a id="15437" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15389" class="Bound">r</a><a id="15438" class="Symbol">)</a> <a id="15440" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15419" class="Bound">j</a>
                   <a id="15461" class="Symbol">;</a> <a id="15463" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15463" class="Bound">j</a> <a id="15465" class="Symbol">(</a><a id="15466" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15395" class="Bound">i</a> <a id="15468" class="Symbol">=</a> <a id="15470" href="Library.Primitive.html#1771" class="InductiveConstructor">i1</a><a id="15472" class="Symbol">)</a> <a id="15474" class="Symbol">→</a> <a id="15476" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15393" class="Bound">q</a> <a id="15478" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15463" class="Bound">j</a>
                   <a id="15499" class="Symbol">;</a> <a id="15501" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15501" class="Bound">j</a> <a id="15503" class="Symbol">(</a><a id="15504" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15501" class="Bound">j</a> <a id="15506" class="Symbol">=</a> <a id="15508" href="Library.Primitive.html#1723" class="InductiveConstructor">i0</a><a id="15510" class="Symbol">)</a> <a id="15512" class="Symbol">→</a> <a id="15514" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15391" class="Bound">p</a> <a id="15516" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15395" class="Bound">i</a> <a id="15518" class="Symbol">})</a>

<a id="15522" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15522" class="Function">_</a> <a id="15524" class="Symbol">=</a> <a id="15526" class="Symbol">λ</a> <a id="15528" class="Symbol">{</a><a id="15529" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15529" class="Bound">A</a> <a id="15531" class="Symbol">:</a> <a id="15533" href="Library.Primitive.html#422" class="Primitive">Type</a><a id="15537" class="Symbol">}</a> <a id="15539" class="Symbol">{</a><a id="15540" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15540" class="Bound">w</a> <a id="15542" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15542" class="Bound">x</a> <a id="15544" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15544" class="Bound">y</a> <a id="15546" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15546" class="Bound">z</a> <a id="15548" class="Symbol">:</a> <a id="15550" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15529" class="Bound">A</a><a id="15551" class="Symbol">}</a> <a id="15553" class="Symbol">(</a><a id="15554" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15554" class="Bound">r</a> <a id="15556" class="Symbol">:</a> <a id="15558" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15540" class="Bound">w</a> <a id="15560" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="15562" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15542" class="Bound">x</a><a id="15563" class="Symbol">)</a> <a id="15565" class="Symbol">(</a><a id="15566" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15566" class="Bound">p</a> <a id="15568" class="Symbol">:</a> <a id="15570" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15542" class="Bound">x</a> <a id="15572" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="15574" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15544" class="Bound">y</a><a id="15575" class="Symbol">)</a> <a id="15577" class="Symbol">(</a><a id="15578" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15578" class="Bound">q</a> <a id="15580" class="Symbol">:</a> <a id="15582" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15544" class="Bound">y</a> <a id="15584" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="15586" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15546" class="Bound">z</a><a id="15587" class="Symbol">)</a>
  <a id="15591" class="Symbol">→</a> <a id="15593" href="Library.Prelude.html#2894" class="InductiveConstructor">test-identical</a> 
    <a id="15613" class="Symbol">(</a><a id="15614" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15554" class="Bound">r</a> <a id="15616" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13423" class="Function Operator">∙∙</a> <a id="15619" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15566" class="Bound">p</a> <a id="15621" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13423" class="Function Operator">∙∙</a> <a id="15624" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15578" class="Bound">q</a><a id="15625" class="Symbol">)</a> 
    <a id="15632" class="Symbol">(</a><a id="15633" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15305" class="Function">double-comp-inline</a> <a id="15652" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15554" class="Bound">r</a> <a id="15654" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15566" class="Bound">p</a> <a id="15656" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15578" class="Bound">q</a><a id="15657" class="Symbol">)</a>
</pre>
</div>
<p>We are now ready to define ordinary composition of paths.</p>
<pre><code>         p ∙ q
      x ∙ ∙ ∙ &gt; z
      ^         ^            ^
 refl |         | q        j |
      |         |            ∙ — &gt;
      x — — — &gt; y              i
           p
</code></pre>
<pre class="Agda"><a id="15936" class="Keyword">infixr</a> <a id="15943" class="Number">30</a> <a id="15946" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15950" class="Function Operator">_∙_</a>
<a id="_∙_"></a><a id="15950" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15950" class="Function Operator">_∙_</a> <a id="15954" class="Symbol">:</a> <a id="15956" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a> <a id="15958" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="15960" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a> <a id="15962" class="Symbol">→</a> <a id="15964" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a> <a id="15966" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="15968" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#594" class="Generalizable">z</a> <a id="15970" class="Symbol">→</a> <a id="15972" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a> <a id="15974" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="15976" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#594" class="Generalizable">z</a>
<a id="15978" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15978" class="Bound">p</a> <a id="15980" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15950" class="Function Operator">∙</a> <a id="15982" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15982" class="Bound">q</a> <a id="15984" class="Symbol">=</a> <a id="15986" href="2--Paths-and-Identifications.2-1--Paths.html#5312" class="Function">refl</a> <a id="15991" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13423" class="Function Operator">∙∙</a> <a id="15994" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15978" class="Bound">p</a> <a id="15996" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13423" class="Function Operator">∙∙</a> <a id="15999" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15982" class="Bound">q</a>
</pre>
<div class="info">
<p><span class="info-label">Aside:</span>
It seems like we shouldn’t really need to specify the left side of the
box in this definition. The following code seems like a fine way to
define the composite:</p>
<pre class="Agda"><a id="16183" class="Comment">{- Error!
_∙∙_ : x ≡ y → y ≡ z → x ≡ z
(p ∙∙ q) i = hcomp i (λ { j (i = i1) → q j 
                             ; j (j = i0) → p i })
-}</a>
</pre>
<p>The problem is that when a case is left off like this, Agda fills in
the missing side with another <code class="Agda"><a href="Library.Prelude.html#650" class="Function">hcomp</a></code> of a lower dimension. In
this case, it gives us <code>hcomp (λ ()) x</code> in the top left corner.
Unfortunately, this is is not exactly the same as <code>x</code>, so this fails
to give us a path <code>x ≡ z</code>. This is related to the fact that
transporting over <code class="Agda"><a href="2--Paths-and-Identifications.2-1--Paths.html#5312" class="Function">refl</a></code> does not give us the identity function
definitionally.</p>
</div>
<h2 id="constructing-cubes"><a class="header" href="#constructing-cubes">Constructing Cubes</a></h2>
<p>Let’s do an example of a proper 3D cube. Let’s say we want to
construct this square:</p>
<pre><code>        q
   y — — — &gt; z
   ^         ^
 p |         | q            ^
   |         |            j |
   x — — — &gt; y              ∙ — &gt;
        p                     i
</code></pre>
<pre class="Agda"><a id="diamond"></a><a id="17048" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#17048" class="Function">diamond</a> <a id="17056" class="Symbol">:</a> <a id="17058" class="Symbol">(</a><a id="17059" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#17059" class="Bound">p</a> <a id="17061" class="Symbol">:</a> <a id="17063" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a> <a id="17065" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="17067" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a><a id="17068" class="Symbol">)</a> <a id="17070" class="Symbol">(</a><a id="17071" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#17071" class="Bound">q</a> <a id="17073" class="Symbol">:</a> <a id="17075" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a> <a id="17077" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="17079" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#594" class="Generalizable">z</a><a id="17080" class="Symbol">)</a> <a id="17082" class="Symbol">→</a> <a id="17084" href="2--Paths-and-Identifications.2-1--Paths.html#24427" class="Function">Square</a> <a id="17091" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#17059" class="Bound">p</a> <a id="17093" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#17071" class="Bound">q</a> <a id="17095" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#17059" class="Bound">p</a> <a id="17097" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#17071" class="Bound">q</a>
</pre>
<p>To construct this via <code class="Agda"><a href="Library.Prelude.html#650" class="Function">hcomp</a></code>, we need to cook up a cube (using a
third dimension <code>k</code>) with this square as the top face, and where we
know definitions for all the remaining sides.</p>
<pre><code>                      q
            y — — — — — — — — &gt; z
      p   / ^             q   / ^
        /   |               /   |
      /     |   p         /     |
    x — — — — — — — — &gt; y       |
    ^       |           ^       | q                  ^   j
    |       |           |       |                  k | /
    |       |           |       |                    ∙ — &gt;
    |       |           |       |                      i
    |       ? — — — — — | — — &gt; ?
    |  ?  /             |     /
    |   /               |   /  ?
    | /                 | /
    ? — — — — — — — — &gt; ?
              ?
</code></pre>
<p>We can make some educated guesses about which <code class="Agda"><a href="2--Paths-and-Identifications.2-1--Paths.html#24427" class="Function">Square</a></code> will work
best as the bottom face. The bottom-left corner should be <code>x</code>, because
<code class="Agda"><a href="2--Paths-and-Identifications.2-1--Paths.html#5312" class="Function">refl</a></code> is the only immediately available path that ends in <code>x</code>.
Similarly, the two bottom-middle corners should be <code>x</code> or <code>y</code>. If we
choose <code>x</code>, then two of the resulting faces will involve all of <code>x</code>,
<code>y</code> and <code>z</code>, so in the hope of keeping thing simple we go with <code>y</code>.
Finally, if the bottom-right corner is <code>z</code>, then the bottom face is
exactly the thing we are trying to construct, so to make any progress
we must go with <code>y</code>:</p>
<pre><code>                      q
            y — — — — — — — — &gt; z
      p   / ^             q   / ^
        /   |               /   |
      /     |   p         /     |
    x — — — — — — — — &gt; y       |
    ^       |           ^       | q                  ^   j
    |       |           |       |                  k | /
    |       |           |       |                    ∙ — &gt;
    |       |           |       |                      i
    |       y — — — — — | — — &gt; y
    |  p  /             |     /
    |   /               |   /
    | /                 | /
    x — — — — — — — — &gt; y
              p
</code></pre>
<p>Now we have, in fact, seen all of these faces before! (Review the
interval algebra in Lecture 2-X if necessary.)</p>
<pre class="Agda"><a id="diamond-tube"></a><a id="19293" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#19293" class="Function">diamond-tube</a> <a id="19306" class="Symbol">:</a> <a id="19308" class="Symbol">{</a><a id="19309" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#19309" class="Bound">x</a> <a id="19311" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#19311" class="Bound">y</a> <a id="19313" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#19313" class="Bound">z</a> <a id="19315" class="Symbol">:</a> <a id="19317" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a><a id="19318" class="Symbol">}</a> 
  <a id="19323" class="Symbol">→</a> <a id="19325" class="Symbol">(</a><a id="19326" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#19326" class="Bound">p</a> <a id="19328" class="Symbol">:</a> <a id="19330" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#19309" class="Bound">x</a> <a id="19332" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="19334" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#19311" class="Bound">y</a><a id="19335" class="Symbol">)</a> <a id="19337" class="Symbol">→</a> <a id="19339" class="Symbol">(</a><a id="19340" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#19340" class="Bound">q</a> <a id="19342" class="Symbol">:</a> <a id="19344" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#19311" class="Bound">y</a> <a id="19346" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="19348" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#19313" class="Bound">z</a><a id="19349" class="Symbol">)</a>
  <a id="19353" class="Symbol">→</a> <a id="19355" class="Symbol">(</a><a id="19356" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#19356" class="Bound">i</a> <a id="19358" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#19358" class="Bound">j</a> <a id="19360" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#19360" class="Bound">k</a> <a id="19362" class="Symbol">:</a> <a id="19364" href="Library.Primitive.html#1675" class="Datatype">I</a><a id="19365" class="Symbol">)</a> <a id="19367" class="Symbol">→</a> <a id="19369" href="Library.Primitive.html#3205" class="Primitive">Partial</a> <a id="19377" class="Symbol">(</a><a id="19378" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="19380" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#19356" class="Bound">i</a> <a id="19382" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="19384" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="19386" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#19358" class="Bound">j</a> <a id="19388" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="19390" href="Library.Prelude.html#359" class="Primitive Operator">~</a> <a id="19392" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#19360" class="Bound">k</a><a id="19393" class="Symbol">)</a> <a id="19395" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a>
<a id="19397" class="Comment">-- Exercise:</a>
<a id="19410" class="Comment">-- diamond-tube p q i j k (i = i0) = {!!}</a>
<a id="19452" class="Comment">-- diamond-tube p q i j k (i = i1) = {!!}</a>
<a id="19494" class="Comment">-- diamond-tube p q i j k (j = i0) = {!!}</a>
<a id="19536" class="Comment">-- diamond-tube p q i j k (j = i1) = {!!}</a>
<a id="19578" class="Comment">-- diamond-tube p q i j k (k = i0) = {!!}</a>

<a id="19988" class="Comment">-- Exercise:</a>
<a id="20001" class="Comment">-- diamond p q i j = hcomp {!!} {!!}</a>
</pre>
<p>The composition problems that result in some desired square are not
unique. Try constructing the same <code class="Agda"><a href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#17048" class="Function">diamond</a></code> square as above,
but using the following alternative cube:</p>
<pre><code>                        q
              y — — — — — — — — &gt; z
        p   / ^             q   / ^
          /   |               /   |
        /     |   p         /     |
      x — — — — — — — — &gt; y       |
      ^       |           ^       | q                  ^   j
      |       |           |       |                  k | /
      |       |           |       |                    ∙ — &gt;
      |       |           |       |                      i
sym p |       y — — — — — | — — &gt; y
      |     /             |     /
      |   /               |   /
      | /                 | /
      y — — — — — — — — &gt; y
</code></pre>
<pre class="Agda"><a id="diamond-tube-alt"></a><a id="20974" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#20974" class="Function">diamond-tube-alt</a> <a id="20991" class="Symbol">:</a> <a id="20993" class="Symbol">{</a><a id="20994" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#20994" class="Bound">x</a> <a id="20996" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#20996" class="Bound">y</a> <a id="20998" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#20998" class="Bound">z</a> <a id="21000" class="Symbol">:</a> <a id="21002" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a><a id="21003" class="Symbol">}</a> <a id="21005" class="Symbol">(</a><a id="21006" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21006" class="Bound">p</a> <a id="21008" class="Symbol">:</a> <a id="21010" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#20994" class="Bound">x</a> <a id="21012" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="21014" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#20996" class="Bound">y</a><a id="21015" class="Symbol">)</a> <a id="21017" class="Symbol">(</a><a id="21018" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21018" class="Bound">q</a> <a id="21020" class="Symbol">:</a> <a id="21022" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#20996" class="Bound">y</a> <a id="21024" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="21026" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#20998" class="Bound">z</a><a id="21027" class="Symbol">)</a>
  <a id="21031" class="Symbol">→</a> <a id="21033" class="Symbol">(</a><a id="21034" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21034" class="Bound">i</a> <a id="21036" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21036" class="Bound">j</a> <a id="21038" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21038" class="Bound">k</a> <a id="21040" class="Symbol">:</a> <a id="21042" href="Library.Primitive.html#1675" class="Datatype">I</a><a id="21043" class="Symbol">)</a> <a id="21045" class="Symbol">→</a> <a id="21047" href="Library.Primitive.html#3205" class="Primitive">Partial</a> <a id="21055" class="Symbol">(</a><a id="21056" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="21058" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21034" class="Bound">i</a> <a id="21060" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="21062" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="21064" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21036" class="Bound">j</a> <a id="21066" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="21068" href="Library.Prelude.html#359" class="Primitive Operator">~</a> <a id="21070" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21038" class="Bound">k</a><a id="21071" class="Symbol">)</a> <a id="21073" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a>
<a id="21075" class="Comment">-- Exercise:</a>
<a id="21088" class="Comment">-- diamond-tube-alt p q i j k (i = i0) = {!!}</a>
<a id="21134" class="Comment">-- diamond-tube-alt p q i j k (i = i1) = {!!}</a>
<a id="21180" class="Comment">-- diamond-tube-alt p q i j k (j = i0) = {!!}</a>
<a id="21226" class="Comment">-- diamond-tube-alt p q i j k (j = i1) = {!!}</a>
<a id="21272" class="Comment">-- diamond-tube-alt p q i j k (k = i0) = {!!}</a>

<a id="diamond-alt"></a><a id="21693" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21693" class="Function">diamond-alt</a> <a id="21705" class="Symbol">:</a> <a id="21707" class="Symbol">(</a><a id="21708" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21708" class="Bound">p</a> <a id="21710" class="Symbol">:</a> <a id="21712" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a> <a id="21714" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="21716" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a><a id="21717" class="Symbol">)</a> <a id="21719" class="Symbol">→</a> <a id="21721" class="Symbol">(</a><a id="21722" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21722" class="Bound">q</a> <a id="21724" class="Symbol">:</a> <a id="21726" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a> <a id="21728" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="21730" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#594" class="Generalizable">z</a><a id="21731" class="Symbol">)</a> <a id="21733" class="Symbol">→</a> <a id="21735" href="2--Paths-and-Identifications.2-1--Paths.html#24427" class="Function">Square</a> <a id="21742" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21708" class="Bound">p</a> <a id="21744" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21722" class="Bound">q</a> <a id="21746" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21708" class="Bound">p</a> <a id="21748" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21722" class="Bound">q</a>
<a id="21750" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21693" class="Function">diamond-alt</a> <a id="21762" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21762" class="Bound">p</a> <a id="21764" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21764" class="Bound">q</a> <a id="21766" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21766" class="Bound">i</a> <a id="21768" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21768" class="Bound">j</a> <a id="21770" class="Symbol">=</a> <a id="21772" href="Library.Prelude.html#650" class="Function">hcomp</a> <a id="21778" class="Symbol">(</a><a id="21779" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="21781" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21766" class="Bound">i</a> <a id="21783" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="21785" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="21787" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21768" class="Bound">j</a><a id="21788" class="Symbol">)</a> <a id="21790" class="Symbol">(</a><a id="21791" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#20974" class="Function">diamond-tube-alt</a> <a id="21808" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21762" class="Bound">p</a> <a id="21810" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21764" class="Bound">q</a> <a id="21812" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21766" class="Bound">i</a> <a id="21814" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#21768" class="Bound">j</a><a id="21815" class="Symbol">)</a>
</pre>
<p>A crucial application of <code class="Agda"><a href="Library.Prelude.html#650" class="Function">hcomp</a></code> for 3-d cubes is showing that the
composition square <code class="Agda"><a href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#12836" class="Function">double-comp-box</a></code> has a filler. That is, not only
do we have the double-composition path <code>r ∙∙ p ∙∙ q</code> at the top, but
the interior of the square is filled in and we have an element of
<code class="Agda"><a href="2--Paths-and-Identifications.2-1--Paths.html#24427" class="Function">Square</a></code> for</p>
<pre><code>           q
      y — — — &gt; z
      ^         ^
   p  |         | r ∙∙ p ∙∙ q          ^
      |         |                    j |
      x — — — &gt; w                      ∙ — &gt;
         sym r                           i
</code></pre>
<p>We orient this square in a diagonally flipped way. You will have to
trust us that this is the most convenient orientation to use this
square in!</p>
<p>Here’s the cube we want to fill.</p>
<pre><code>                      q
            y — — — — — — — — &gt; z
          / ^                 / ^
     p  /   |               /  r ∙∙ p ∙∙ q
      /     | sym r       /     |
    x — — — — — — — — &gt; w       |
    ^       |           ^       |                    ^   j
    |       |           |       |                  k | /
    |       |           |       |                    ∙ — &gt;
    |       |           |       |                      i
    |       y — — — — — | — — &gt; y
    |  p  /             |     /
    |   /               |   / p
    | /                 | /
    x — — — — — — — — &gt; x
</code></pre>
<p>We use a new trick to construct this cube. As mentioned above, if a
face is missing from the partial element then <code class="Agda"><a href="Library.Prelude.html#650" class="Function">hcomp</a></code> fills in the
missing face at the top with an <code class="Agda"><a href="Library.Prelude.html#650" class="Function">hcomp</a></code> of a lower dimension. In the
cube we are trying to construct, the <code class="Agda"><a href="Library.Prelude.html#650" class="Function">hcomp</a></code> of the sides for the
for the <code>i = i1</code> face is exactly the double-composite <code>r ∙∙ p ∙∙ q</code>
that we wanted as the top edge in the first place. So we don’t have to
worry about giving a <code>i = i1</code> case at all. (Which is lucky, because
that’s exactly the <code class="Agda"><a href="2--Paths-and-Identifications.2-1--Paths.html#24427" class="Function">Square</a></code> we are trying to construct right now!)</p>
<pre class="Agda"><a id="∙∙-filler-tube"></a><a id="23746" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23746" class="Function">∙∙-filler-tube</a> <a id="23761" class="Symbol">:</a> <a id="23763" class="Symbol">{</a><a id="23764" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23764" class="Bound">w</a> <a id="23766" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23766" class="Bound">x</a> <a id="23768" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23768" class="Bound">y</a> <a id="23770" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23770" class="Bound">z</a> <a id="23772" class="Symbol">:</a> <a id="23774" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a><a id="23775" class="Symbol">}</a>
    <a id="23781" class="Symbol">(</a><a id="23782" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23782" class="Bound">r</a> <a id="23784" class="Symbol">:</a> <a id="23786" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23764" class="Bound">w</a> <a id="23788" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="23790" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23766" class="Bound">x</a><a id="23791" class="Symbol">)</a> <a id="23793" class="Symbol">(</a><a id="23794" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23794" class="Bound">p</a> <a id="23796" class="Symbol">:</a> <a id="23798" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23766" class="Bound">x</a> <a id="23800" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="23802" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23768" class="Bound">y</a><a id="23803" class="Symbol">)</a> <a id="23805" class="Symbol">(</a><a id="23806" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23806" class="Bound">q</a> <a id="23808" class="Symbol">:</a> <a id="23810" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23768" class="Bound">y</a> <a id="23812" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="23814" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23770" class="Bound">z</a><a id="23815" class="Symbol">)</a>
  <a id="23819" class="Symbol">→</a> <a id="23821" class="Symbol">(</a><a id="23822" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23822" class="Bound">i</a> <a id="23824" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23824" class="Bound">j</a> <a id="23826" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23826" class="Bound">k</a> <a id="23828" class="Symbol">:</a> <a id="23830" href="Library.Primitive.html#1675" class="Datatype">I</a><a id="23831" class="Symbol">)</a> <a id="23833" class="Symbol">→</a> <a id="23835" href="Library.Primitive.html#3205" class="Primitive">Partial</a> <a id="23843" class="Symbol">(</a><a id="23844" href="Library.Prelude.html#359" class="Primitive Operator">~</a> <a id="23846" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23822" class="Bound">i</a> <a id="23848" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="23850" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="23852" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23824" class="Bound">j</a> <a id="23854" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="23856" href="Library.Prelude.html#359" class="Primitive Operator">~</a> <a id="23858" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23826" class="Bound">k</a><a id="23859" class="Symbol">)</a> <a id="23861" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a>
<a id="23863" class="Comment">-- Exercise:</a>
<a id="23876" class="Comment">-- ∙∙-filler-tube r p q i j k (j = i0) = {!!}</a>
<a id="23922" class="Comment">-- ∙∙-filler-tube r p q i j k (j = i1) = {!!}</a>
<a id="23968" class="Comment">-- ∙∙-filler-tube r p q i j k (i = i0) = {!!}</a>
<a id="24014" class="Comment">-- ∙∙-filler-tube r p q i j k (k = i0) = {!!}</a>

<a id="∙∙-filler"></a><a id="24371" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24371" class="Function">∙∙-filler</a> <a id="24381" class="Symbol">:</a> <a id="24383" class="Symbol">(</a><a id="24384" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24384" class="Bound">r</a> <a id="24386" class="Symbol">:</a> <a id="24388" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#596" class="Generalizable">w</a> <a id="24390" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="24392" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a><a id="24393" class="Symbol">)</a> <a id="24395" class="Symbol">(</a><a id="24396" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24396" class="Bound">p</a> <a id="24398" class="Symbol">:</a> <a id="24400" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a> <a id="24402" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="24404" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a><a id="24405" class="Symbol">)</a> <a id="24407" class="Symbol">(</a><a id="24408" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24408" class="Bound">q</a> <a id="24410" class="Symbol">:</a> <a id="24412" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a> <a id="24414" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="24416" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#594" class="Generalizable">z</a><a id="24417" class="Symbol">)</a>
  <a id="24421" class="Symbol">→</a> <a id="24423" href="2--Paths-and-Identifications.2-1--Paths.html#24427" class="Function">Square</a> <a id="24430" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24396" class="Bound">p</a> <a id="24432" class="Symbol">(</a><a id="24433" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24384" class="Bound">r</a> <a id="24435" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13423" class="Function Operator">∙∙</a> <a id="24438" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24396" class="Bound">p</a> <a id="24440" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#13423" class="Function Operator">∙∙</a> <a id="24443" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24408" class="Bound">q</a><a id="24444" class="Symbol">)</a> <a id="24446" class="Symbol">(</a><a id="24447" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#24347" class="Function">sym</a> <a id="24451" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24384" class="Bound">r</a><a id="24452" class="Symbol">)</a> <a id="24454" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24408" class="Bound">q</a>
<a id="24456" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24371" class="Function">∙∙-filler</a> <a id="24466" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24466" class="Bound">r</a> <a id="24468" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24468" class="Bound">p</a> <a id="24470" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24470" class="Bound">q</a> <a id="24472" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24472" class="Bound">i</a> <a id="24474" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24474" class="Bound">j</a> <a id="24476" class="Symbol">=</a> <a id="24478" href="Library.Prelude.html#650" class="Function">hcomp</a> <a id="24484" class="Symbol">(</a><a id="24485" href="Library.Prelude.html#359" class="Primitive Operator">~</a> <a id="24487" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24472" class="Bound">i</a> <a id="24489" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="24491" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="24493" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24474" class="Bound">j</a><a id="24494" class="Symbol">)</a> <a id="24496" class="Symbol">(</a><a id="24497" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#23746" class="Function">∙∙-filler-tube</a> <a id="24512" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24466" class="Bound">r</a> <a id="24514" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24468" class="Bound">p</a> <a id="24516" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24470" class="Bound">q</a> <a id="24518" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24472" class="Bound">i</a> <a id="24520" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24474" class="Bound">j</a><a id="24521" class="Symbol">)</a>
</pre>
<p>We also have the filler for ordinary composition, just by setting the
path <code>r</code> to <code class="Agda"><a href="2--Paths-and-Identifications.2-1--Paths.html#5312" class="Function">refl</a></code>.</p>
<pre><code>           q
      y — — — &gt; z
      ^         ^                   ^    
   p  |         | p ∙ q           j |       
      |         |                   ∙ — &gt;   
      x — — — &gt; x                     i     
         refl                        
</code></pre>
<pre class="Agda"><a id="∙-filler"></a><a id="24900" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24900" class="Function">∙-filler</a> <a id="24909" class="Symbol">:</a> <a id="24911" class="Symbol">(</a><a id="24912" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24912" class="Bound">p</a> <a id="24914" class="Symbol">:</a> <a id="24916" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a> <a id="24918" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="24920" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a><a id="24921" class="Symbol">)</a> <a id="24923" class="Symbol">(</a><a id="24924" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24924" class="Bound">q</a> <a id="24926" class="Symbol">:</a> <a id="24928" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a> <a id="24930" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="24932" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#594" class="Generalizable">z</a><a id="24933" class="Symbol">)</a> <a id="24935" class="Symbol">→</a> <a id="24937" href="2--Paths-and-Identifications.2-1--Paths.html#24427" class="Function">Square</a> <a id="24944" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24912" class="Bound">p</a> <a id="24946" class="Symbol">(</a><a id="24947" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24912" class="Bound">p</a> <a id="24949" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15950" class="Function Operator">∙</a> <a id="24951" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24924" class="Bound">q</a><a id="24952" class="Symbol">)</a> <a id="24954" href="2--Paths-and-Identifications.2-1--Paths.html#5312" class="Function">refl</a> <a id="24959" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24924" class="Bound">q</a>
<a id="24961" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24900" class="Function">∙-filler</a> <a id="24970" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24970" class="Bound">p</a> <a id="24972" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24972" class="Bound">q</a> <a id="24974" class="Symbol">=</a> <a id="24976" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24371" class="Function">∙∙-filler</a> <a id="24986" href="2--Paths-and-Identifications.2-1--Paths.html#5312" class="Function">refl</a> <a id="24991" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24970" class="Bound">p</a> <a id="24993" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24972" class="Bound">q</a>
</pre>
<h2 id="properties-of-path-composition"><a class="header" href="#properties-of-path-composition">Properties of Path Composition</a></h2>
<p>Let’s set about proving some basic facts about path composition.</p>
<p>First, <code class="Agda"><a href="2--Paths-and-Identifications.2-1--Paths.html#5312" class="Function">refl</a></code> is the unit for path composition. The fact that
<code class="Agda"><a href="2--Paths-and-Identifications.2-1--Paths.html#5312" class="Function">refl</a></code> can be cancelled on the right is exactly an instance of the
<code class="Agda"><a href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24900" class="Function">∙-filler</a></code> square above.</p>
<pre><code>       refl
    y — — — &gt; z
    ^         ^                     ^      
 p  |         | p ∙ refl          j |       
    |         |                     ∙ — &gt;   
    x — — — &gt; w                       i     
       refl                       
</code></pre>
<pre class="Agda"><a id="∙-idr"></a><a id="25538" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#25538" class="Function">∙-idr</a> <a id="25544" class="Symbol">:</a> <a id="25546" class="Symbol">(</a><a id="25547" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#25547" class="Bound">p</a> <a id="25549" class="Symbol">:</a> <a id="25551" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a> <a id="25553" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="25555" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a><a id="25556" class="Symbol">)</a> <a id="25558" class="Symbol">→</a> <a id="25560" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#25547" class="Bound">p</a> <a id="25562" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="25564" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#25547" class="Bound">p</a> <a id="25566" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15950" class="Function Operator">∙</a> <a id="25568" href="2--Paths-and-Identifications.2-1--Paths.html#5312" class="Function">refl</a>
<a id="25573" class="Comment">-- Exercise:</a>
<a id="25586" class="Comment">-- ∙-idr p = {!!}</a>
</pre>
<div class="info">
<p><span class="info-label">Aside:</span>
Proving <code class="Agda"><a href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#25538" class="Function">∙-idr</a></code> and similar justifies orienting <code class="Agda"><a href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24900" class="Function">∙-filler</a></code> the way
we do: when proving an identity involving paths, we are constructing a
square whose top and bottom are <code class="Agda"><a href="2--Paths-and-Identifications.2-1--Paths.html#5312" class="Function">refl</a></code>. When the right-hand side of
the identity is a composite, it is useful to have the filler oriented
so that the composite is also on the right-hand side.</p>
</div>
<p>To cancel <code class="Agda"><a href="2--Paths-and-Identifications.2-1--Paths.html#5312" class="Function">refl</a></code> on the left, we have to build another cube.</p>
<pre><code>            y — — — — — — — — &gt; y
          / ^                 / ^
     p  /   |               /  refl ∙ p
      /     |             /     |
    x — — — — — — — — &gt; x       |
    ^       |           ^       |                    ^   j
    |       |           |       |                  k | /
    |       |           |       |                    ∙ — &gt;
    |       |    sym p  |       |                      i
    |       y — — — — — | — — &gt; x
    |  p  /             |     /
    |   /               |   /
    | /                 | /
    x — — — — — — — — &gt; x
</code></pre>
<pre class="Agda"><a id="∙-idl-tube"></a><a id="26698" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#26698" class="Function">∙-idl-tube</a> <a id="26709" class="Symbol">:</a> <a id="26711" class="Symbol">{</a><a id="26712" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#26712" class="Bound">x</a> <a id="26714" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#26714" class="Bound">y</a> <a id="26716" class="Symbol">:</a> <a id="26718" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a><a id="26719" class="Symbol">}</a> <a id="26721" class="Symbol">(</a><a id="26722" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#26722" class="Bound">p</a> <a id="26724" class="Symbol">:</a> <a id="26726" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#26712" class="Bound">x</a> <a id="26728" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="26730" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#26714" class="Bound">y</a><a id="26731" class="Symbol">)</a> <a id="26733" class="Symbol">→</a> <a id="26735" class="Symbol">(</a><a id="26736" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#26736" class="Bound">i</a> <a id="26738" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#26738" class="Bound">j</a> <a id="26740" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#26740" class="Bound">k</a> <a id="26742" class="Symbol">:</a> <a id="26744" href="Library.Primitive.html#1675" class="Datatype">I</a><a id="26745" class="Symbol">)</a> <a id="26747" class="Symbol">→</a> <a id="26749" href="Library.Primitive.html#3205" class="Primitive">Partial</a> <a id="26757" class="Symbol">(</a><a id="26758" href="Library.Prelude.html#359" class="Primitive Operator">~</a> <a id="26760" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#26736" class="Bound">i</a> <a id="26762" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="26764" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="26766" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#26738" class="Bound">j</a> <a id="26768" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="26770" href="Library.Prelude.html#359" class="Primitive Operator">~</a> <a id="26772" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#26740" class="Bound">k</a><a id="26773" class="Symbol">)</a> <a id="26775" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a>
<a id="26777" class="Comment">-- Exercise:</a>
<a id="26790" class="Comment">-- ∙-idl-tube {x = x} p i j k (i = i0) = {!!} -- Constant in the `k` direction</a>
<a id="26869" class="Comment">-- ∙-idl-tube {x = x} p i j k (j = i0) = {!!} -- Completely constant</a>
<a id="26938" class="Comment">-- ∙-idl-tube {x = x} p i j k (j = i1) = {!!} -- Constructed from `p` using a connection</a>
<a id="27027" class="Comment">-- ∙-idl-tube {x = x} p i j k (k = i0) = {!!} -- Constructed from `p` using connections in a different way</a>

<a id="∙-idl"></a><a id="27425" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#27425" class="Function">∙-idl</a> <a id="27431" class="Symbol">:</a> <a id="27433" class="Symbol">(</a><a id="27434" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#27434" class="Bound">p</a> <a id="27436" class="Symbol">:</a> <a id="27438" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a> <a id="27440" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="27442" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a><a id="27443" class="Symbol">)</a> <a id="27445" class="Symbol">→</a> <a id="27447" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#27434" class="Bound">p</a> <a id="27449" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="27451" href="2--Paths-and-Identifications.2-1--Paths.html#5312" class="Function">refl</a> <a id="27456" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15950" class="Function Operator">∙</a> <a id="27458" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#27434" class="Bound">p</a>
<a id="27460" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#27425" class="Function">∙-idl</a> <a id="27466" class="Symbol">{</a><a id="27467" class="Argument">x</a> <a id="27469" class="Symbol">=</a> <a id="27471" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#27471" class="Bound">x</a><a id="27472" class="Symbol">}</a> <a id="27474" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#27474" class="Bound">p</a> <a id="27476" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#27476" class="Bound">i</a> <a id="27478" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#27478" class="Bound">j</a> <a id="27480" class="Symbol">=</a> <a id="27482" href="Library.Prelude.html#650" class="Function">hcomp</a> <a id="27488" class="Symbol">(</a><a id="27489" href="Library.Prelude.html#359" class="Primitive Operator">~</a> <a id="27491" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#27476" class="Bound">i</a> <a id="27493" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="27495" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="27497" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#27478" class="Bound">j</a><a id="27498" class="Symbol">)</a> <a id="27500" class="Symbol">(</a><a id="27501" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#26698" class="Function">∙-idl-tube</a> <a id="27512" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#27474" class="Bound">p</a> <a id="27514" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#27476" class="Bound">i</a> <a id="27516" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#27478" class="Bound">j</a><a id="27517" class="Symbol">)</a>
</pre>
<p>Next, that composing a path with its inverse is equal to <code class="Agda"><a href="2--Paths-and-Identifications.2-1--Paths.html#5312" class="Function">refl</a></code>.</p>
<pre><code>                x — — — — — — — — &gt; x
              / ^                 / ^
 p ∙ sym p  /   |               /
          /     |             /     |
        x — — — — — — — — &gt; x       |
        ^       | sym p     ^       |                    ^   j
        |       |           |       |                  k | /
        |       |           |       |                    ∙ — &gt;
        |       |    sym p  |       |                      i
        |       y — — — — — | — — &gt; x
        |  p  /             |     /
        |   /               |   /
        | /                 | /
        x — — — — — — — — &gt; x
</code></pre>
<p>Here, the face on the left is exactly the composition square for <code>p</code>
and <code>sym p</code>, so we can leave it off.</p>
<pre class="Agda"><a id="∙-invr-tube"></a><a id="28364" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28364" class="Function">∙-invr-tube</a> <a id="28376" class="Symbol">:</a> <a id="28378" class="Symbol">{</a><a id="28379" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28379" class="Bound">x</a> <a id="28381" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28381" class="Bound">y</a> <a id="28383" class="Symbol">:</a> <a id="28385" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a><a id="28386" class="Symbol">}</a> <a id="28388" class="Symbol">(</a><a id="28389" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28389" class="Bound">p</a> <a id="28391" class="Symbol">:</a> <a id="28393" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28379" class="Bound">x</a> <a id="28395" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="28397" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28381" class="Bound">y</a><a id="28398" class="Symbol">)</a> <a id="28400" class="Symbol">→</a> <a id="28402" class="Symbol">(</a><a id="28403" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28403" class="Bound">i</a> <a id="28405" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28405" class="Bound">j</a> <a id="28407" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28407" class="Bound">k</a> <a id="28409" class="Symbol">:</a> <a id="28411" href="Library.Primitive.html#1675" class="Datatype">I</a><a id="28412" class="Symbol">)</a> <a id="28414" class="Symbol">→</a> <a id="28416" href="Library.Primitive.html#3205" class="Primitive">Partial</a> <a id="28424" class="Symbol">(</a><a id="28425" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28403" class="Bound">i</a> <a id="28427" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="28429" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="28431" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28405" class="Bound">j</a> <a id="28433" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="28435" href="Library.Prelude.html#359" class="Primitive Operator">~</a> <a id="28437" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28407" class="Bound">k</a><a id="28438" class="Symbol">)</a> <a id="28440" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a>
<a id="28442" class="Comment">-- Exercise:</a>
<a id="28455" class="Comment">-- ∙-invr-tube {x = x} p i j k (i = i1) = {!!}</a>
<a id="28502" class="Comment">-- ∙-invr-tube {x = x} p i j k (j = i0) = {!!}</a>
<a id="28549" class="Comment">-- ∙-invr-tube {x = x} p i j k (j = i1) = {!!}</a>
<a id="28596" class="Comment">-- ∙-invr-tube {x = x} p i j k (k = i0) = {!!}</a>

<a id="∙-invr"></a><a id="28938" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28938" class="Function">∙-invr</a> <a id="28945" class="Symbol">:</a> <a id="28947" class="Symbol">(</a><a id="28948" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28948" class="Bound">p</a> <a id="28950" class="Symbol">:</a> <a id="28952" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a> <a id="28954" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="28956" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a><a id="28957" class="Symbol">)</a> <a id="28959" class="Symbol">→</a> <a id="28961" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28948" class="Bound">p</a> <a id="28963" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15950" class="Function Operator">∙</a> <a id="28965" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#24347" class="Function">sym</a> <a id="28969" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28948" class="Bound">p</a> <a id="28971" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="28973" href="2--Paths-and-Identifications.2-1--Paths.html#5312" class="Function">refl</a>
<a id="28978" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28938" class="Function">∙-invr</a> <a id="28985" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28985" class="Bound">p</a> <a id="28987" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28987" class="Bound">i</a> <a id="28989" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28989" class="Bound">j</a> <a id="28991" class="Symbol">=</a> <a id="28993" href="Library.Prelude.html#650" class="Function">hcomp</a> <a id="28999" class="Symbol">(</a><a id="29000" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28987" class="Bound">i</a> <a id="29002" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="29004" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="29006" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28989" class="Bound">j</a><a id="29007" class="Symbol">)</a> <a id="29009" class="Symbol">(</a><a id="29010" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28364" class="Function">∙-invr-tube</a> <a id="29022" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28985" class="Bound">p</a> <a id="29024" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28987" class="Bound">i</a> <a id="29026" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#28989" class="Bound">j</a><a id="29027" class="Symbol">)</a> 

<a id="∙-invl"></a><a id="29031" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#29031" class="Function">∙-invl</a> <a id="29038" class="Symbol">:</a> <a id="29040" class="Symbol">(</a><a id="29041" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#29041" class="Bound">p</a> <a id="29043" class="Symbol">:</a> <a id="29045" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a> <a id="29047" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="29049" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a><a id="29050" class="Symbol">)</a> <a id="29052" class="Symbol">→</a> <a id="29054" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#24347" class="Function">sym</a> <a id="29058" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#29041" class="Bound">p</a> <a id="29060" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15950" class="Function Operator">∙</a> <a id="29062" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#29041" class="Bound">p</a> <a id="29064" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="29066" href="2--Paths-and-Identifications.2-1--Paths.html#5312" class="Function">refl</a>
<a id="29071" class="Comment">-- Exercise: (Use symmetry and save work!)</a>
<a id="29114" class="Comment">-- ∙-invl p = {!!}</a>
</pre>
<p>Finally, that composition is associative via one final cube.</p>
<pre><code>                  z — — — — — — — — &gt; z
                / ^                 / ^
 r ∙ (p ∙ q)  /   |               /  (r ∙ p) ∙ q
            /     |             /     |
          w — — — — — — — — &gt; w       |
          ^       |           ^       | q                  ^   j
          |     q |           |       |                  k | /
          |       |           |       |                    ∙ — &gt;
          |       |           |       |                      i
          |       y — — — — — | — — &gt; y
         r ∙ p  /             |     /
          |   /               |   /  r ∙ p
          | /                 | /
          w — — — — — — — — &gt; w
</code></pre>
<pre class="Agda"><a id="∙-assoc-tube"></a><a id="29967" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#29967" class="Function">∙-assoc-tube</a> <a id="29980" class="Symbol">:</a> <a id="29982" class="Symbol">{</a><a id="29983" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#29983" class="Bound">w</a> <a id="29985" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#29985" class="Bound">x</a> <a id="29987" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#29987" class="Bound">y</a> <a id="29989" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#29989" class="Bound">z</a> <a id="29991" class="Symbol">:</a> <a id="29993" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a><a id="29994" class="Symbol">}</a> <a id="29996" class="Symbol">(</a><a id="29997" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#29997" class="Bound">r</a> <a id="29999" class="Symbol">:</a> <a id="30001" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#29983" class="Bound">w</a> <a id="30003" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="30005" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#29985" class="Bound">x</a><a id="30006" class="Symbol">)</a> <a id="30008" class="Symbol">(</a><a id="30009" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30009" class="Bound">p</a> <a id="30011" class="Symbol">:</a> <a id="30013" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#29985" class="Bound">x</a> <a id="30015" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="30017" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#29987" class="Bound">y</a><a id="30018" class="Symbol">)</a> <a id="30020" class="Symbol">(</a><a id="30021" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30021" class="Bound">q</a> <a id="30023" class="Symbol">:</a> <a id="30025" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#29987" class="Bound">y</a> <a id="30027" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="30029" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#29989" class="Bound">z</a><a id="30030" class="Symbol">)</a>
  <a id="30034" class="Symbol">→</a> <a id="30036" class="Symbol">(</a><a id="30037" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30037" class="Bound">i</a> <a id="30039" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30039" class="Bound">j</a> <a id="30041" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30041" class="Bound">k</a> <a id="30043" class="Symbol">:</a> <a id="30045" href="Library.Primitive.html#1675" class="Datatype">I</a><a id="30046" class="Symbol">)</a> <a id="30048" class="Symbol">→</a> <a id="30050" href="Library.Primitive.html#3205" class="Primitive">Partial</a> <a id="30058" class="Symbol">(</a><a id="30059" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="30061" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30037" class="Bound">i</a> <a id="30063" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="30065" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="30067" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30039" class="Bound">j</a> <a id="30069" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="30071" href="Library.Prelude.html#359" class="Primitive Operator">~</a> <a id="30073" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30041" class="Bound">k</a><a id="30074" class="Symbol">)</a> <a id="30076" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a>
<a id="30078" class="Comment">-- Exercise: (Hint: a couple of cases use <code class="Agda"><a href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#24900" class="Function">∙-filler</a></code>)</a>
<a id="30134" class="Comment">-- ∙-assoc-tube {w = w} r p q i j k (i = i0) = {!!}</a>
<a id="30186" class="Comment">-- ∙-assoc-tube {w = w} r p q i j k (i = i1) = {!!}</a>
<a id="30238" class="Comment">-- ∙-assoc-tube {w = w} r p q i j k (j = i0) = {!!}</a>
<a id="30290" class="Comment">-- ∙-assoc-tube {w = w} r p q i j k (j = i1) = {!!}</a>
<a id="30342" class="Comment">-- ∙-assoc-tube {w = w} r p q i j k (k = i0) = {!!}</a>

<a id="∙-assoc"></a><a id="30814" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30814" class="Function">∙-assoc</a> <a id="30822" class="Symbol">:</a> <a id="30824" class="Symbol">(</a><a id="30825" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30825" class="Bound">r</a> <a id="30827" class="Symbol">:</a> <a id="30829" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#596" class="Generalizable">w</a> <a id="30831" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="30833" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a><a id="30834" class="Symbol">)</a> <a id="30836" class="Symbol">(</a><a id="30837" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30837" class="Bound">p</a> <a id="30839" class="Symbol">:</a> <a id="30841" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a> <a id="30843" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="30845" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a><a id="30846" class="Symbol">)</a> <a id="30848" class="Symbol">(</a><a id="30849" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30849" class="Bound">q</a> <a id="30851" class="Symbol">:</a> <a id="30853" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a> <a id="30855" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="30857" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#594" class="Generalizable">z</a><a id="30858" class="Symbol">)</a>
  <a id="30862" class="Symbol">→</a> <a id="30864" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30825" class="Bound">r</a> <a id="30866" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15950" class="Function Operator">∙</a> <a id="30868" class="Symbol">(</a><a id="30869" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30837" class="Bound">p</a> <a id="30871" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15950" class="Function Operator">∙</a> <a id="30873" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30849" class="Bound">q</a><a id="30874" class="Symbol">)</a> <a id="30876" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="30878" class="Symbol">(</a><a id="30879" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30825" class="Bound">r</a> <a id="30881" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15950" class="Function Operator">∙</a> <a id="30883" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30837" class="Bound">p</a><a id="30884" class="Symbol">)</a> <a id="30886" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15950" class="Function Operator">∙</a> <a id="30888" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30849" class="Bound">q</a>
<a id="30890" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30814" class="Function">∙-assoc</a> <a id="30898" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30898" class="Bound">r</a> <a id="30900" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30900" class="Bound">p</a> <a id="30902" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30902" class="Bound">q</a> <a id="30904" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30904" class="Bound">i</a> <a id="30906" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30906" class="Bound">j</a> <a id="30908" class="Symbol">=</a> <a id="30910" href="Library.Prelude.html#650" class="Function">hcomp</a> <a id="30916" class="Symbol">(</a><a id="30917" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="30919" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30904" class="Bound">i</a> <a id="30921" href="Library.Prelude.html#387" class="Primitive Operator">∨</a> <a id="30923" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#6524" class="Function">∂</a> <a id="30925" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30906" class="Bound">j</a><a id="30926" class="Symbol">)</a> <a id="30928" class="Symbol">(</a><a id="30929" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#29967" class="Function">∙-assoc-tube</a> <a id="30942" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30898" class="Bound">r</a> <a id="30944" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30900" class="Bound">p</a> <a id="30946" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30902" class="Bound">q</a> <a id="30948" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30904" class="Bound">i</a> <a id="30950" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#30906" class="Bound">j</a><a id="30951" class="Symbol">)</a>
</pre>
<h2 id="equational-reasoning"><a class="header" href="#equational-reasoning">Equational Reasoning</a></h2>
<p>As should be familiar from ordinary pen-and-paper mathematics, it is
very useful to produce an equality by chaining together lots of
simpler ones. There is a common Agda pattern that is used to give this
some nice syntax, and the following lines set it up:</p>
<pre class="Agda"><a id="step-≡"></a><a id="31246" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31246" class="Function">step-≡</a> <a id="31253" class="Symbol">:</a> <a id="31255" class="Symbol">(</a><a id="31256" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31256" class="Bound">x</a> <a id="31258" class="Symbol">:</a> <a id="31260" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a><a id="31261" class="Symbol">)</a> <a id="31263" class="Symbol">→</a> <a id="31265" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a> <a id="31267" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="31269" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#594" class="Generalizable">z</a> <a id="31271" class="Symbol">→</a> <a id="31273" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31256" class="Bound">x</a> <a id="31275" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="31277" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a> <a id="31279" class="Symbol">→</a> <a id="31281" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31256" class="Bound">x</a> <a id="31283" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="31285" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#594" class="Generalizable">z</a>
<a id="31287" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31246" class="Function">step-≡</a> <a id="31294" class="Symbol">_</a> <a id="31296" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31296" class="Bound">p</a> <a id="31298" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31298" class="Bound">q</a> <a id="31300" class="Symbol">=</a> <a id="31302" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31298" class="Bound">q</a> <a id="31304" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15950" class="Function Operator">∙</a> <a id="31306" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31296" class="Bound">p</a>

<a id="31309" class="Keyword">syntax</a> <a id="31316" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31246" class="Function">step-≡</a> <a id="31323" class="Bound">x</a> <a id="31325" class="Bound">q</a> <a id="31327" class="Bound">p</a> <a id="31329" class="Symbol">=</a> <a id="31331" class="Bound">x</a> <a id="31333" class="Function">≡⟨</a> <a id="31336" class="Bound">p</a> <a id="31338" class="Function">⟩</a> <a id="31340" class="Bound">q</a>

<a id="_∎"></a><a id="31343" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31343" class="Function Operator">_∎</a> <a id="31346" class="Symbol">:</a> <a id="31348" class="Symbol">(</a><a id="31349" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31349" class="Bound">x</a> <a id="31351" class="Symbol">:</a> <a id="31353" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a><a id="31354" class="Symbol">)</a> <a id="31356" class="Symbol">→</a> <a id="31358" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31349" class="Bound">x</a> <a id="31360" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="31362" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31349" class="Bound">x</a>
<a id="31364" class="Symbol">_</a> <a id="31366" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31343" class="Function Operator">∎</a> <a id="31368" class="Symbol">=</a> <a id="31370" href="2--Paths-and-Identifications.2-1--Paths.html#5312" class="Function">refl</a>

<a id="31376" class="Keyword">infixr</a> <a id="31383" class="Number">2</a> <a id="31385" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31246" class="Function">step-≡</a>
<a id="31392" class="Keyword">infix</a>  <a id="31399" class="Number">3</a> <a id="31401" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31343" class="Function Operator">_∎</a>
</pre>
<p>Here’s how to use it:</p>
<pre class="Agda"><a id="31436" class="Keyword">private</a>
  <a id="example1"></a><a id="31446" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31446" class="Function">example1</a> <a id="31455" class="Symbol">:</a> <a id="31457" class="Symbol">(</a><a id="31458" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31458" class="Bound">w</a> <a id="31460" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31460" class="Bound">x</a> <a id="31462" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31462" class="Bound">y</a> <a id="31464" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31464" class="Bound">z</a> <a id="31466" class="Symbol">:</a> <a id="31468" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a><a id="31469" class="Symbol">)</a>
    <a id="31475" class="Symbol">→</a> <a id="31477" class="Symbol">(</a><a id="31478" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31478" class="Bound">p</a> <a id="31480" class="Symbol">:</a> <a id="31482" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31458" class="Bound">w</a> <a id="31484" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="31486" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31460" class="Bound">x</a><a id="31487" class="Symbol">)</a>
    <a id="31493" class="Symbol">→</a> <a id="31495" class="Symbol">(</a><a id="31496" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31496" class="Bound">q</a> <a id="31498" class="Symbol">:</a> <a id="31500" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31460" class="Bound">x</a> <a id="31502" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="31504" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31462" class="Bound">y</a><a id="31505" class="Symbol">)</a>
    <a id="31511" class="Symbol">→</a> <a id="31513" class="Symbol">(</a><a id="31514" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31514" class="Bound">r</a> <a id="31516" class="Symbol">:</a> <a id="31518" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31462" class="Bound">y</a> <a id="31520" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="31522" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31464" class="Bound">z</a><a id="31523" class="Symbol">)</a>
    <a id="31529" class="Symbol">→</a> <a id="31531" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31458" class="Bound">w</a> <a id="31533" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="31535" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31464" class="Bound">z</a>
  <a id="31539" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31446" class="Function">example1</a> <a id="31548" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31548" class="Bound">w</a> <a id="31550" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31550" class="Bound">x</a> <a id="31552" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31552" class="Bound">y</a> <a id="31554" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31554" class="Bound">z</a> <a id="31556" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31556" class="Bound">p</a> <a id="31558" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31558" class="Bound">q</a> <a id="31560" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31560" class="Bound">r</a> <a id="31562" class="Symbol">=</a>
    <a id="31568" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31548" class="Bound">w</a> <a id="31570" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31246" class="Function">≡⟨</a> <a id="31573" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31556" class="Bound">p</a> <a id="31575" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31246" class="Function">⟩</a>
    <a id="31581" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31550" class="Bound">x</a> <a id="31583" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31246" class="Function">≡⟨</a> <a id="31586" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31558" class="Bound">q</a> <a id="31588" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31246" class="Function">⟩</a>
    <a id="31594" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31552" class="Bound">y</a> <a id="31596" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31246" class="Function">≡⟨</a> <a id="31599" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31560" class="Bound">r</a> <a id="31601" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31246" class="Function">⟩</a>
    <a id="31607" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31554" class="Bound">z</a> <a id="31609" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31343" class="Function Operator">∎</a>

  <a id="example2"></a><a id="31614" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31614" class="Function">example2</a> <a id="31623" class="Symbol">:</a> <a id="31625" class="Symbol">(</a><a id="31626" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31626" class="Bound">f</a> <a id="31628" class="Symbol">:</a> <a id="31630" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a> <a id="31632" class="Symbol">→</a> <a id="31634" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#571" class="Generalizable">B</a><a id="31635" class="Symbol">)</a> <a id="31637" class="Symbol">(</a><a id="31638" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31638" class="Bound">g</a> <a id="31640" class="Symbol">:</a> <a id="31642" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#571" class="Generalizable">B</a> <a id="31644" class="Symbol">→</a> <a id="31646" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a><a id="31647" class="Symbol">)</a>
    <a id="31653" class="Symbol">→</a> <a id="31655" class="Symbol">(</a><a id="31656" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31656" class="Bound">η</a> <a id="31658" class="Symbol">:</a> <a id="31660" class="Symbol">(</a><a id="31661" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31661" class="Bound">x</a> <a id="31663" class="Symbol">:</a> <a id="31665" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a><a id="31666" class="Symbol">)</a> <a id="31668" class="Symbol">→</a> <a id="31670" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31661" class="Bound">x</a> <a id="31672" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="31674" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31638" class="Bound">g</a> <a id="31676" class="Symbol">(</a><a id="31677" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31626" class="Bound">f</a> <a id="31679" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31661" class="Bound">x</a><a id="31680" class="Symbol">))</a>
    <a id="31687" class="Symbol">→</a> <a id="31689" class="Symbol">(</a><a id="31690" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31690" class="Bound">ε</a> <a id="31692" class="Symbol">:</a> <a id="31694" class="Symbol">(</a><a id="31695" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31695" class="Bound">y</a> <a id="31697" class="Symbol">:</a> <a id="31699" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#571" class="Generalizable">B</a><a id="31700" class="Symbol">)</a> <a id="31702" class="Symbol">→</a> <a id="31704" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31626" class="Bound">f</a> <a id="31706" class="Symbol">(</a><a id="31707" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31638" class="Bound">g</a> <a id="31709" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31695" class="Bound">y</a><a id="31710" class="Symbol">)</a> <a id="31712" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="31714" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31695" class="Bound">y</a><a id="31715" class="Symbol">)</a>
    <a id="31721" class="Symbol">→</a> <a id="31723" class="Symbol">(</a><a id="31724" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31724" class="Bound">x</a> <a id="31726" class="Symbol">:</a> <a id="31728" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a><a id="31729" class="Symbol">)</a> <a id="31731" class="Symbol">→</a> <a id="31733" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31626" class="Bound">f</a> <a id="31735" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31724" class="Bound">x</a> <a id="31737" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="31739" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31626" class="Bound">f</a> <a id="31741" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31724" class="Bound">x</a>
  <a id="31745" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31614" class="Function">example2</a> <a id="31754" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31754" class="Bound">f</a> <a id="31756" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31756" class="Bound">g</a> <a id="31758" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31758" class="Bound">η</a> <a id="31760" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31760" class="Bound">ε</a> <a id="31762" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31762" class="Bound">x</a> <a id="31764" class="Symbol">=</a>
    <a id="31770" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31754" class="Bound">f</a> <a id="31772" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31762" class="Bound">x</a>         <a id="31782" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31246" class="Function">≡⟨</a> <a id="31785" href="2--Paths-and-Identifications.2-1--Paths.html#17691" class="Function">ap</a> <a id="31788" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31754" class="Bound">f</a> <a id="31790" class="Symbol">(</a><a id="31791" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31758" class="Bound">η</a> <a id="31793" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31762" class="Bound">x</a><a id="31794" class="Symbol">)</a> <a id="31796" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31246" class="Function">⟩</a>
    <a id="31802" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31754" class="Bound">f</a> <a id="31804" class="Symbol">(</a><a id="31805" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31756" class="Bound">g</a> <a id="31807" class="Symbol">(</a><a id="31808" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31754" class="Bound">f</a> <a id="31810" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31762" class="Bound">x</a><a id="31811" class="Symbol">))</a> <a id="31814" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31246" class="Function">≡⟨</a> <a id="31817" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31760" class="Bound">ε</a> <a id="31819" class="Symbol">(</a><a id="31820" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31754" class="Bound">f</a> <a id="31822" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31762" class="Bound">x</a><a id="31823" class="Symbol">)</a> <a id="31825" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31246" class="Function">⟩</a>
    <a id="31831" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31754" class="Bound">f</a> <a id="31833" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31762" class="Bound">x</a>         <a id="31843" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31343" class="Function Operator">∎</a>
</pre>
<p>Try it yourself by re-proving a path version of <code class="Agda"><a href="1--Type-Theory.1-5--Propositions-as-Types.html#19915" class="Function">+ℕ-≡ℕ-comm</a></code>.</p>
<pre class="Agda"><a id="+ℕ-comm-helper"></a><a id="31919" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31919" class="Function">+ℕ-comm-helper</a> <a id="31934" class="Symbol">:</a> <a id="31936" class="Symbol">(</a><a id="31937" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31937" class="Bound">n</a> <a id="31939" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31939" class="Bound">m</a> <a id="31941" class="Symbol">:</a> <a id="31943" href="Library.Prelude.html#3629" class="Datatype">ℕ</a><a id="31944" class="Symbol">)</a> <a id="31946" class="Symbol">→</a> <a id="31948" class="Symbol">(</a><a id="31949" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31937" class="Bound">n</a> <a id="31951" href="1--Type-Theory.1-2--Inductive-Types.html#12858" class="Function Operator">+ℕ</a> <a id="31954" class="Symbol">(</a><a id="31955" href="Library.Prelude.html#3657" class="InductiveConstructor">suc</a> <a id="31959" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31939" class="Bound">m</a><a id="31960" class="Symbol">))</a> <a id="31963" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="31965" href="Library.Prelude.html#3657" class="InductiveConstructor">suc</a> <a id="31969" class="Symbol">(</a><a id="31970" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31937" class="Bound">n</a> <a id="31972" href="1--Type-Theory.1-2--Inductive-Types.html#12858" class="Function Operator">+ℕ</a> <a id="31975" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31939" class="Bound">m</a><a id="31976" class="Symbol">)</a>
<a id="31978" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31919" class="Function">+ℕ-comm-helper</a> <a id="31993" href="Library.Prelude.html#3646" class="InductiveConstructor">zero</a> <a id="31998" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31998" class="Bound">m</a> <a id="32000" class="Symbol">=</a> <a id="32002" href="2--Paths-and-Identifications.2-1--Paths.html#5312" class="Function">refl</a>
<a id="32007" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31919" class="Function">+ℕ-comm-helper</a> <a id="32022" class="Symbol">(</a><a id="32023" href="Library.Prelude.html#3657" class="InductiveConstructor">suc</a> <a id="32027" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32027" class="Bound">n</a><a id="32028" class="Symbol">)</a> <a id="32030" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32030" class="Bound">m</a> <a id="32032" class="Symbol">=</a> <a id="32034" href="2--Paths-and-Identifications.2-1--Paths.html#17691" class="Function">ap</a> <a id="32037" href="Library.Prelude.html#3657" class="InductiveConstructor">suc</a> <a id="32041" class="Symbol">(</a><a id="32042" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#31919" class="Function">+ℕ-comm-helper</a> <a id="32057" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32027" class="Bound">n</a> <a id="32059" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32030" class="Bound">m</a><a id="32060" class="Symbol">)</a>

<a id="+ℕ-comm"></a><a id="32063" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32063" class="Function">+ℕ-comm</a> <a id="32071" class="Symbol">:</a> <a id="32073" class="Symbol">(</a><a id="32074" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32074" class="Bound">n</a> <a id="32076" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32076" class="Bound">m</a> <a id="32078" class="Symbol">:</a> <a id="32080" href="Library.Prelude.html#3629" class="Datatype">ℕ</a><a id="32081" class="Symbol">)</a> <a id="32083" class="Symbol">→</a> <a id="32085" class="Symbol">(</a><a id="32086" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32074" class="Bound">n</a> <a id="32088" href="1--Type-Theory.1-2--Inductive-Types.html#12858" class="Function Operator">+ℕ</a> <a id="32091" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32076" class="Bound">m</a><a id="32092" class="Symbol">)</a> <a id="32094" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="32096" class="Symbol">(</a><a id="32097" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32076" class="Bound">m</a> <a id="32099" href="1--Type-Theory.1-2--Inductive-Types.html#12858" class="Function Operator">+ℕ</a> <a id="32102" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32074" class="Bound">n</a><a id="32103" class="Symbol">)</a>
<a id="32105" class="Comment">-- Exercise:</a>
<a id="32118" class="Comment">-- +ℕ-comm n zero = +ℕ-idr n</a>
<a id="32147" class="Comment">-- +ℕ-comm n (suc m) =</a>
<a id="32170" class="Comment">--   n +ℕ suc m   ≡⟨ {!!} ⟩</a>
<a id="32198" class="Comment">--   suc (n +ℕ m) ≡⟨ {!!} ⟩</a>
<a id="32226" class="Comment">--   suc (m +ℕ n) ∎</a>
</pre>
<p>And the following lemma about path composition. Each
step will involve a lemma we’ve proven above.</p>
<pre class="Agda"><a id="∙l-cancel"></a><a id="32633" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32633" class="Function">∙l-cancel</a> <a id="32643" class="Symbol">:</a> <a id="32645" class="Symbol">(</a><a id="32646" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32646" class="Bound">p</a> <a id="32648" class="Symbol">:</a> <a id="32650" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a> <a id="32652" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="32654" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#592" class="Generalizable">y</a><a id="32655" class="Symbol">)</a> <a id="32657" class="Symbol">(</a><a id="32658" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32658" class="Bound">q</a> <a id="32660" class="Symbol">:</a> <a id="32662" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#590" class="Generalizable">x</a> <a id="32664" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="32666" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#594" class="Generalizable">z</a><a id="32667" class="Symbol">)</a> <a id="32669" class="Symbol">→</a> <a id="32671" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32646" class="Bound">p</a> <a id="32673" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15950" class="Function Operator">∙</a> <a id="32675" class="Symbol">(</a><a id="32676" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#24347" class="Function">sym</a> <a id="32680" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32646" class="Bound">p</a> <a id="32682" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#15950" class="Function Operator">∙</a> <a id="32684" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32658" class="Bound">q</a><a id="32685" class="Symbol">)</a> <a id="32687" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="32689" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#32658" class="Bound">q</a>
<a id="32691" class="Comment">-- Exercise:</a>
<a id="32704" class="Comment">-- ∙l-cancel p q =</a>
<a id="32723" class="Comment">--   p ∙ (sym p  ∙ q) ≡⟨ {!!} ⟩</a>
<a id="32755" class="Comment">--   (p ∙ sym p) ∙ q  ≡⟨ {!!} ⟩</a>
<a id="32787" class="Comment">--   refl ∙ q         ≡⟨ {!!} ⟩</a>
<a id="32819" class="Comment">--   q                ∎</a>
</pre>
<p>We encourage you to use this syntax when chaining paths together, it
makes it a lot easier to understand what’s going on when you can see
the intermediate points that the composite path is passing through!</p>
<h2 id="equivalences-revisited"><a class="header" href="#equivalences-revisited">Equivalences Revisited</a></h2>
<p>Now that we have path composition, we can finally prove that
equivalences compose!</p>
<p>This function takes a lot of data as input but the the idea is very
simple: we just compose the provided sections and retracts and use
path composition to combine the provided proofs.</p>
<pre class="Agda"><a id="∘-isEquiv"></a><a id="33655" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33655" class="Function">∘-isEquiv</a> <a id="33665" class="Symbol">:</a> <a id="33667" class="Symbol">(</a><a id="33668" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33668" class="Bound">e₁</a> <a id="33671" class="Symbol">:</a> <a id="33673" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#571" class="Generalizable">B</a> <a id="33675" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#6026" class="Function Operator">≃</a> <a id="33677" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#573" class="Generalizable">C</a><a id="33678" class="Symbol">)</a> <a id="33680" class="Symbol">(</a><a id="33681" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33681" class="Bound">e₂</a> <a id="33684" class="Symbol">:</a> <a id="33686" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a> <a id="33688" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#6026" class="Function Operator">≃</a> <a id="33690" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#571" class="Generalizable">B</a><a id="33691" class="Symbol">)</a> <a id="33693" class="Symbol">→</a> <a id="33695" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#5559" class="Record">isEquiv</a> <a id="33703" class="Symbol">(</a><a id="33704" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33668" class="Bound">e₁</a> <a id="33707" class="Symbol">.</a><a id="33708" class="Field">map</a> <a id="33712" href="1--Type-Theory.1-3--Universes-and-More-Inductive-Types.html#3978" class="Function Operator">∘</a> <a id="33714" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33681" class="Bound">e₂</a> <a id="33717" class="Symbol">.</a><a id="33718" class="Field">map</a><a id="33721" class="Symbol">)</a>
<a id="33723" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33655" class="Function">∘-isEquiv</a> <a id="33733" class="Symbol">(</a><a id="33734" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#6329" class="InductiveConstructor">packEquiv</a> <a id="33744" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33744" class="Bound">f₁</a> <a id="33747" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33747" class="Bound">g₁</a> <a id="33750" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33750" class="Bound">s₁</a> <a id="33753" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33753" class="Bound">g&#39;₁</a> <a id="33757" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33757" class="Bound">r₁</a><a id="33759" class="Symbol">)</a> <a id="33761" class="Symbol">(</a><a id="33762" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#6329" class="InductiveConstructor">packEquiv</a> <a id="33772" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33772" class="Bound">f₂</a> <a id="33775" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33775" class="Bound">g₂</a> <a id="33778" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33778" class="Bound">s₂</a> <a id="33781" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33781" class="Bound">g&#39;₂</a> <a id="33785" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33785" class="Bound">r₂</a><a id="33787" class="Symbol">)</a> 
  <a id="33792" class="Symbol">=</a> <a id="33794" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#6224" class="InductiveConstructor">packIsEquiv</a> <a id="33806" class="Symbol">(</a><a id="33807" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33775" class="Bound">g₂</a> <a id="33810" href="1--Type-Theory.1-3--Universes-and-More-Inductive-Types.html#3978" class="Function Operator">∘</a> <a id="33812" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33747" class="Bound">g₁</a><a id="33814" class="Symbol">)</a> <a id="33816" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33854" class="Function">to-fro</a> <a id="33823" class="Symbol">(</a><a id="33824" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33781" class="Bound">g&#39;₂</a> <a id="33828" href="1--Type-Theory.1-3--Universes-and-More-Inductive-Types.html#3978" class="Function Operator">∘</a> <a id="33830" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33753" class="Bound">g&#39;₁</a><a id="33833" class="Symbol">)</a> <a id="33835" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#34271" class="Function">fro-to</a>
  <a id="33844" class="Keyword">where</a>
    <a id="33854" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33854" class="Function">to-fro</a> <a id="33861" class="Symbol">:</a> <a id="33863" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#1716" class="Function">isSection</a> <a id="33873" class="Symbol">(</a><a id="33874" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33744" class="Bound">f₁</a> <a id="33877" href="1--Type-Theory.1-3--Universes-and-More-Inductive-Types.html#3978" class="Function Operator">∘</a> <a id="33879" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33772" class="Bound">f₂</a><a id="33881" class="Symbol">)</a> <a id="33883" class="Symbol">(</a><a id="33884" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33775" class="Bound">g₂</a> <a id="33887" href="1--Type-Theory.1-3--Universes-and-More-Inductive-Types.html#3978" class="Function Operator">∘</a> <a id="33889" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33747" class="Bound">g₁</a><a id="33891" class="Symbol">)</a>
    <a id="33897" class="Comment">-- Exercise:</a>
    <a id="33914" class="Comment">-- to-fro b = f₁ (f₂ (g₂ (g₁ b))) ≡⟨ {!!} ⟩</a>
    <a id="33962" class="Comment">--            f₁         (g₁ b)   ≡⟨ {!!} ⟩</a>
    <a id="34010" class="Comment">--                           b    ∎</a>

<a id="_∘e_"></a><a id="34835" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#34835" class="Function Operator">_∘e_</a> <a id="34840" class="Symbol">:</a> <a id="34842" class="Symbol">(</a><a id="34843" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#571" class="Generalizable">B</a> <a id="34845" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#6026" class="Function Operator">≃</a> <a id="34847" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#573" class="Generalizable">C</a><a id="34848" class="Symbol">)</a> <a id="34850" class="Symbol">→</a> <a id="34852" class="Symbol">(</a><a id="34853" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a> <a id="34855" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#6026" class="Function Operator">≃</a> <a id="34857" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#571" class="Generalizable">B</a><a id="34858" class="Symbol">)</a> <a id="34860" class="Symbol">→</a> <a id="34862" class="Symbol">(</a><a id="34863" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a> <a id="34865" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#6026" class="Function Operator">≃</a> <a id="34867" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#573" class="Generalizable">C</a><a id="34868" class="Symbol">)</a>
<a id="34870" class="Symbol">(</a><a id="34871" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#34871" class="Bound">e₁</a> <a id="34874" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#34835" class="Function Operator">∘e</a> <a id="34877" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#34877" class="Bound">e₂</a><a id="34879" class="Symbol">)</a> <a id="34881" class="Symbol">.</a><a id="34882" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#5838" class="Field">map</a> <a id="34886" class="Symbol">=</a> <a id="34888" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#34871" class="Bound">e₁</a> <a id="34891" class="Symbol">.</a><a id="34892" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#5838" class="Field">map</a> <a id="34896" href="1--Type-Theory.1-3--Universes-and-More-Inductive-Types.html#3978" class="Function Operator">∘</a> <a id="34898" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#34877" class="Bound">e₂</a> <a id="34901" class="Symbol">.</a><a id="34902" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#5838" class="Field">map</a>
<a id="34906" class="Symbol">(</a><a id="34907" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#34907" class="Bound">e₁</a> <a id="34910" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#34835" class="Function Operator">∘e</a> <a id="34913" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#34913" class="Bound">e₂</a><a id="34915" class="Symbol">)</a> <a id="34917" class="Symbol">.</a><a id="34918" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#5854" class="Field">proof</a> <a id="34924" class="Symbol">=</a> <a id="34926" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#33655" class="Function">∘-isEquiv</a> <a id="34936" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#34907" class="Bound">e₁</a> <a id="34939" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#34913" class="Bound">e₂</a>

<a id="34943" class="Keyword">infixr</a> <a id="34950" class="Number">9</a> <a id="34952" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#34835" class="Function Operator">_∘e_</a>
</pre>
<p>Just as we did for paths, we’ll throw in some syntax for chaining
equivalences together.</p>
<pre class="Agda"><a id="_≃⟨_⟩_"></a><a id="35056" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35056" class="Function Operator">_≃⟨_⟩_</a> <a id="35063" class="Symbol">:</a> <a id="35065" class="Symbol">{</a><a id="35066" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35066" class="Bound">B</a> <a id="35068" class="Symbol">:</a> <a id="35070" href="Library.Primitive.html#422" class="Primitive">Type</a> <a id="35075" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#550" class="Generalizable">ℓ&#39;</a><a id="35077" class="Symbol">}</a> <a id="35079" class="Symbol">{</a><a id="35080" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35080" class="Bound">C</a> <a id="35082" class="Symbol">:</a> <a id="35084" href="Library.Primitive.html#422" class="Primitive">Type</a> <a id="35089" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#553" class="Generalizable">ℓ&#39;&#39;</a><a id="35092" class="Symbol">}</a> <a id="35094" class="Symbol">(</a><a id="35095" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35095" class="Bound">X</a> <a id="35097" class="Symbol">:</a> <a id="35099" href="Library.Primitive.html#422" class="Primitive">Type</a> <a id="35104" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#548" class="Generalizable">ℓ</a><a id="35105" class="Symbol">)</a> <a id="35107" class="Symbol">→</a> <a id="35109" class="Symbol">(</a><a id="35110" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35095" class="Bound">X</a> <a id="35112" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#6026" class="Function Operator">≃</a> <a id="35114" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35066" class="Bound">B</a><a id="35115" class="Symbol">)</a> <a id="35117" class="Symbol">→</a> <a id="35119" class="Symbol">(</a><a id="35120" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35066" class="Bound">B</a> <a id="35122" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#6026" class="Function Operator">≃</a> <a id="35124" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35080" class="Bound">C</a><a id="35125" class="Symbol">)</a> <a id="35127" class="Symbol">→</a> <a id="35129" class="Symbol">(</a><a id="35130" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35095" class="Bound">X</a> <a id="35132" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#6026" class="Function Operator">≃</a> <a id="35134" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35080" class="Bound">C</a><a id="35135" class="Symbol">)</a>
<a id="35137" class="Symbol">_</a> <a id="35139" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35056" class="Function Operator">≃⟨</a> <a id="35142" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35142" class="Bound">f</a> <a id="35144" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35056" class="Function Operator">⟩</a> <a id="35146" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35146" class="Bound">g</a> <a id="35148" class="Symbol">=</a> <a id="35150" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35146" class="Bound">g</a> <a id="35152" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#34835" class="Function Operator">∘e</a> <a id="35155" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35142" class="Bound">f</a>

<a id="_∎e"></a><a id="35158" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35158" class="Function Operator">_∎e</a> <a id="35162" class="Symbol">:</a> <a id="35164" class="Symbol">(</a><a id="35165" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35165" class="Bound">X</a> <a id="35167" class="Symbol">:</a> <a id="35169" href="Library.Primitive.html#422" class="Primitive">Type</a> <a id="35174" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#548" class="Generalizable">ℓ</a><a id="35175" class="Symbol">)</a> <a id="35177" class="Symbol">→</a> <a id="35179" class="Symbol">(</a><a id="35180" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35165" class="Bound">X</a> <a id="35182" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#6026" class="Function Operator">≃</a> <a id="35184" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35165" class="Bound">X</a><a id="35185" class="Symbol">)</a>
<a id="35187" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35158" class="Function Operator">_∎e</a> <a id="35191" class="Symbol">=</a> <a id="35193" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#8989" class="Function">idEquiv</a>

<a id="35202" class="Keyword">infixr</a>  <a id="35210" class="Number">0</a> <a id="35212" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35056" class="Function Operator">_≃⟨_⟩_</a>
<a id="35219" class="Keyword">infix</a>   <a id="35227" class="Number">1</a> <a id="35229" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35158" class="Function Operator">_∎e</a>
</pre>
<p>Composition of paths is also enough to let us invert equivalences. The first
step is showing that in the data of an equivalence, the section and
retract functions are in fact equal. Again, we’ll explain in
Lecture 2-X why we need to have two different functions in the first
place!</p>
<pre class="Agda"><a id="sec≡ret"></a><a id="35525" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35525" class="Function">sec≡ret</a> <a id="35533" class="Symbol">:</a> <a id="35535" class="Symbol">(</a><a id="35536" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35536" class="Bound">e</a> <a id="35538" class="Symbol">:</a> <a id="35540" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a> <a id="35542" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#6026" class="Function Operator">≃</a> <a id="35544" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#571" class="Generalizable">B</a><a id="35545" class="Symbol">)</a> <a id="35547" class="Symbol">→</a> <a id="35549" class="Symbol">(</a><a id="35550" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35550" class="Bound">b</a> <a id="35552" class="Symbol">:</a> <a id="35554" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#571" class="Generalizable">B</a><a id="35555" class="Symbol">)</a> 
  <a id="35560" class="Symbol">→</a> <a id="35562" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35536" class="Bound">e</a> <a id="35564" class="Symbol">.</a><a id="35565" class="Field">proof</a> <a id="35571" class="Symbol">.</a><a id="35572" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#5670" class="Field">section</a> <a id="35580" class="Symbol">.</a><a id="35581" class="Field">map</a> <a id="35585" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35550" class="Bound">b</a> <a id="35587" href="Library.Prelude.html#2004" class="Function Operator">≡</a> <a id="35589" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35536" class="Bound">e</a> <a id="35591" class="Symbol">.</a><a id="35592" class="Field">proof</a> <a id="35598" class="Symbol">.</a><a id="35599" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#5696" class="Field">retract</a> <a id="35607" class="Symbol">.</a><a id="35608" class="Field">map</a> <a id="35612" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35550" class="Bound">b</a>
<a id="35614" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35525" class="Function">sec≡ret</a> <a id="35622" class="Symbol">(</a><a id="35623" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#6329" class="InductiveConstructor">packEquiv</a> <a id="35633" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35633" class="Bound">f</a> <a id="35635" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35635" class="Bound">g</a> <a id="35637" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35637" class="Bound">s</a> <a id="35639" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35639" class="Bound">g&#39;</a> <a id="35642" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35642" class="Bound">r</a><a id="35643" class="Symbol">)</a> <a id="35645" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35645" class="Bound">b</a> <a id="35647" class="Symbol">=</a>
  <a id="35651" class="Comment">-- Exercise:</a>
  <a id="35666" class="Comment">--        g b   ≡⟨ {!!} ⟩</a>
  <a id="35694" class="Comment">-- g&#39; (f (g b)) ≡⟨ {!!} ⟩</a>
  <a id="35722" class="Comment">-- g&#39; b         ∎</a>
</pre>
<p>Then, we take the original section as our new function <code>B → A</code> and use
the original <code>f : A → B</code> as both its section and retract. Showing that
it is a retract is easy: for that we have exactly the original section
proof. Showing that it is a section will require a use of <code class="Agda"><a href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#35525" class="Function">sec≡ret</a></code>.</p>
<pre class="Agda"><a id="invEquiv"></a><a id="36198" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#36198" class="Function">invEquiv</a> <a id="36207" class="Symbol">:</a> <a id="36209" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a> <a id="36211" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#6026" class="Function Operator">≃</a> <a id="36213" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#571" class="Generalizable">B</a> <a id="36215" class="Symbol">→</a> <a id="36217" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#571" class="Generalizable">B</a> <a id="36219" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#6026" class="Function Operator">≃</a> <a id="36221" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#569" class="Generalizable">A</a>
<a id="36223" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#36198" class="Function">invEquiv</a> <a id="36232" class="Symbol">(</a><a id="36233" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#6329" class="InductiveConstructor">packEquiv</a> <a id="36243" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#36243" class="Bound">f</a> <a id="36245" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#36245" class="Bound">g</a> <a id="36247" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#36247" class="Bound">s</a> <a id="36249" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#36249" class="Bound">g&#39;</a> <a id="36252" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#36252" class="Bound">r</a><a id="36253" class="Symbol">)</a> <a id="36255" class="Symbol">=</a> <a id="36257" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#7290" class="Function">inv→equiv</a> <a id="36267" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#36245" class="Bound">g</a> <a id="36269" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#36243" class="Bound">f</a> <a id="36271" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#36298" class="Function">newIsSection</a> <a id="36284" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#36247" class="Bound">s</a>
  <a id="36288" class="Keyword">where</a>
    <a id="36298" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#36298" class="Function">newIsSection</a> <a id="36311" class="Symbol">:</a> <a id="36313" href="2--Paths-and-Identifications.2-2--Equivalences-and-Path-Algebra.html#1716" class="Function">isSection</a> <a id="36323" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#36245" class="Bound">g</a> <a id="36325" href="2--Paths-and-Identifications.2-4--Composition-and-Filling.html#36243" class="Bound">f</a>
    <a id="36331" class="Comment">-- Exercise:</a>
    <a id="36348" class="Comment">-- newIsSection a = {!!}</a>
</pre>
<h2 id="references-and-further-reading"><a class="header" href="#references-and-further-reading">References and Further Reading</a></h2>
<p>https://agda.readthedocs.io/en/latest/language/sort-system.html</p>

                  </main>
                  <div class="sidetoc">
                    <nav class="pagetoc"></nav>
                  </div>
                </div>
            </div>
        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="theme/pagetoc.js"></script>


    </div>
    </body>
</html>
