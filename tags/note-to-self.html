<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Posts Tagged ‘Note to Self’</title>

        
        
        <link rel="canonical" href="https://mvr.github.io/tags/note-to-self.html" />
        

        <meta property="og:title" content="Posts Tagged ‘Note to Self’" />
        
        
        <meta property="og:url" content="https://mvr.github.io/tags/note-to-self.html" />
        
        <meta property="og:type" content="website" />
        <meta property="og:site_name" content="Mitchell Is Typing" />
        
        <meta property="og:image" content="https://mvr.github.io/cards/default.png" />
        <meta name="twitter:image" content="https://mvr.github.io/cards/default.png" />
        
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content="Posts Tagged ‘Note to Self’" />
        

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css" integrity="sha384-5TcZemv2l/9On385z///+d7MSYlvIEw9FuZTIdZ14vJLqWphw7e7ZPuOiCHJcFCP" crossorigin="anonymous">
        <script defer src="../katex.js" crossorigin="anonymous"></script>
        <!-- <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js" integrity="sha384-cMkvdD8LoxVzGF/RPUKAcvmm49FQ0oxwDF3BGKtDXcEc+T1b2N+teh/OJfpU0jr6" crossorigin="anonymous"></script> -->

        <script>
          document.addEventListener("DOMContentLoaded", function () {
            var mathElements = document.getElementsByClassName("math");
            for (var i = 0; i < mathElements.length; i++) {
              var texText = mathElements[i].firstChild;
              if (mathElements[i].tagName == "SPAN") {
                katex.render(texText.data, mathElements[i], {
                  displayMode: mathElements[i].classList.contains('display'),
                  throwOnError: false,
                  fleqn: false
                });
              }}});
        </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&display=swap" rel="stylesheet">

      <!-- TODO: Some other font candidates. Maybe Nunito? -->
      <!-- <link rel="preconnect" href="https://fonts.googleapis.com"> -->
      <!-- <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> -->
      <!-- <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Nunito:ital,wght@0,200..1000;1,200..1000&family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet"> -->

        <link rel="stylesheet" type="text/css" href="../css/style.css" />
        <script defer src="../life-bg.js"></script>

        <link rel="icon" type="image/png" href="../favicon.png" />

        <meta name="LifeViewer" content="lifeviewer textarea 30 hide limit">

        <link rel="alternate" type="application/atom+xml" title="mvr Blog Posts" href="../atom.xml" />
    </head>

    <body>
      <svg style="display: none;">
  <!-- Right Chevron -->
  <symbol id="icon-chevron-right" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path>
  </symbol>

  <!-- Left Chevron -->
  <symbol id="icon-chevron-left" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
    <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5l-7.5-7.5 7.5-7.5"></path>
  </symbol>
      </svg>
      <canvas id="life-bg-canvas" aria-hidden="true"></canvas>
        <p><a href="../" id="home-page-link"><svg class="chevron-icon"><use href="#icon-chevron-left"></use></svg> Home</a></p>
<h1 class="post-list-header">Posts Tagged ‘Note to Self’</h1>

<section>
<ul id="posts-list">
    
    <li class="post-entry">
        <h1 class="post-list-title"><a href="../posts/cars-in-my-backyard.html">The Cars In My Backyard</a></h1>
        <p class="post-deets">April 21, 2025 / <a title="All pages tagged 'politics'." href="../tags/politics.html" rel="tag">politics</a>, <a title="All pages tagged 'note-to-self'." href="../tags/note-to-self.html" rel="tag">note-to-self</a></p>
        <div class="post-content">
            
            <p>When I walk around my neighbourhood, I am struck by the beautiful
character of the houses here: the draughty Queenslanders and timber
fences, the majestic external staircases, I could go on forever. But
something always felt off, and I finally realise what it is. How can I
admire a house with elegant stilts and sweeping verandahs when there
is a bright red 2019 Ford Puma sitting in the driveway? Or appreciate
a compact, postwar masterpiece when it has a Hilux poking out around
the side? In the hours I’ve spent positioning myself on the street so
I can bathe in the heritage of my neighbourhood, I have not found an
angle without some such monstrosity in my field of view.</p>
<p>We’ve spent years fighting the vandals who want to destroy the
heritage of our neighbourhood. Why should we make an exception for
this? I see no other option: we must forbid residents from bringing
any new cars into the area. This is already a compromise, as if I had
my way we would ban every car newer than the house it is parked in
front of. (Of course, some especially old houses would need hitching
posts to be reinstalled.)</p>

            <div class="continue-post"><a href="../posts/cars-in-my-backyard.html">Read post <svg class="chevron-icon"><use href="#icon-chevron-right"></use></svg></a></div>
            
        </div>
    </li>
    
    <li class="post-entry">
        <h1 class="post-list-title"><a href="../posts/winston.html">2 + 2</a></h1>
        <p class="post-deets">October 14, 2020 / <a title="All pages tagged 'retroactive'." href="../tags/retroactive.html" rel="tag">retroactive</a>, <a title="All pages tagged 'note-to-self'." href="../tags/note-to-self.html" rel="tag">note-to-self</a></p>
        <div class="post-content">
            
            <p>If you are a professional mathematician and you are asked whether <span class="math inline">2 +
2 = 4</span>, the only answer you should give is “Yes, obviously.” 
            <div class="continue-post"><a href="../posts/winston.html">Read post <svg class="chevron-icon"><use href="#icon-chevron-right"></use></svg></a></div>
            
        </div>
    </li>
    
    <li class="post-entry">
        <h1 class="post-list-title"><a href="../posts/cocktails-in-order.html">Cocktails In Order</a></h1>
        <p class="post-deets">July 12, 2019 / <a title="All pages tagged 'note-to-self'." href="../tags/note-to-self.html" rel="tag">note-to-self</a>, <a title="All pages tagged 'retroactive'." href="../tags/retroactive.html" rel="tag">retroactive</a></p>
        <div class="post-content">
            
            <p>Here are most of the cocktails in the IBA cocktail list ordered such
that as you go down, at most one new cocktail ingredient each time is
needed. (This doesn’t include other ingredients such as fruit juice.)</p>

            <div class="continue-post"><a href="../posts/cocktails-in-order.html">Read post <svg class="chevron-icon"><use href="#icon-chevron-right"></use></svg></a></div>
            
        </div>
    </li>
    
    <li class="post-entry">
        <h1 class="post-list-title"><a href="../posts/questions.html">Some Questions</a></h1>
        <p class="post-deets">July  8, 2019 / <a title="All pages tagged 'note-to-self'." href="../tags/note-to-self.html" rel="tag">note-to-self</a>, <a title="All pages tagged 'should-have-known'." href="../tags/should-have-known.html" rel="tag">should-have-known</a></p>
        <div class="post-content">
            
            <p>These answers can be found just by Googling, but it’s nice to have a
record of things I’ve wondered about.</p>
<ul>
<li><p><strong>Why do jetskis spit that jet of water vertically?</strong></p>
<p>This is apparently just for visibility, there is a little pipe
attached to the outlet that faces upward. A lot of people plug it so
they don’t spray passengers or nearby people.</p></li>
<li><p><strong>Why is orange juice usually from concentrate?</strong></p>
<p>Easier to package and transport.</p></li>
<li><p><strong>Why do American school buses look more or less identical?</strong></p>
<p>Road rules are different around school busses; in particular, the
stop sign that pops out from the side stops traffic in both
directions. For this reason it is important that they are easily
identifiable. The yellow is said to be more eye-catching in
peripheral vision than other colours.</p></li>
<li><p><strong>What are blackboards made of?</strong></p>
<p>These days, porcelain enamel on a steel base. They are often green
rather than black, the thinking being that the green paint reduces
glare compared to black.</p></li>
<li><p><strong>What are the square, Asian-looking stamps sometimes present on the
title page of old books?</strong></p>
<p>Those are ‘seals’, signatures in stamp form. The books I’m thinking
of must have once been owned by someone who had their own seal.</p></li>
<li><p><strong>What is the connection between barbers and red/white striped
poles?</strong></p>
<p>One of the services that medieval “barber-surgeons” would perform
was blood-letting. The pole represents the staff that patients would
grip to make their veins pop, and the red and white colouring
represents the bloody bandages that would be hung outside the shop
to dry.</p></li>
<li><p><strong>Why do signs give the maximum fine for disobeying them? Wouldn’t a
minimum be more persuasive?</strong></p>
<p>Typically people are given the maximum penalty, so the value shown
is the fine that any would-be lawbreakers should expect. However, it
is better for judges to be able to use discretion on exactly what
fine is imposed in specific situations.</p></li>
<li><p><strong>Why do so many recipe websites have long boring stories before the
recipes?</strong></p>
<p>Some people like to waffle, but a big reason is ad revenue and
SEO. Long and detailed text causes visitors to spend more time on
your site, and gives more opportunities to include relevant search
keywords.</p></li>
<li><p><strong>Were people just killed by acute appendicitis before modern
surgery?</strong></p>
<p>Yes.</p></li>
<li><p><strong>Why are bay leaves typically not ground up like other herbs?</strong></p>
<p>The flavour of bay leaves is overpoweringly strong when ground up,
even in very small amounts.</p></li>
<li><p><strong>What is the cause of the ‘fingernails on a blackboard’ response?</strong></p>
<p>The cause is currently unknown, but there are some theories.</p>
<p>One hypothesis is that the sound is similar to the alarm call of
some monkeys and the instinct to cringe dates back to early human
evolution. Another is that the sound is “the ultimate dissonance”,
and is unpleasant for the same reason that dissonant music is
unpleasant.</p>
<p>Interestingly, tests showed that it is the middle frequencies
(2000Hz to 4000Hz) that cause the instinctive reaction, not the high
frequencies as one might expect.</p></li>
</ul>
            
        </div>
    </li>
    
    <li class="post-entry">
        <h1 class="post-list-title"><a href="../posts/hamana-graphs.html">Hamana's Graph GADT</a></h1>
        <p class="post-deets">February 10, 2018 / <a title="All pages tagged 'note-to-self'." href="../tags/note-to-self.html" rel="tag">note-to-self</a>, <a title="All pages tagged 'code'." href="../tags/code.html" rel="tag">code</a>, <a title="All pages tagged 'retroactive'." href="../tags/retroactive.html" rel="tag">retroactive</a></p>
        <div class="post-content">
            
            <p>Hamana describes a neat way of encoding general graphs as a GADT in
<a href="https://lmcs.episciences.org/1060">Initial Algebra Semantics for Cyclic Sharing Tree
Structures</a>, a nice trick that I
hadn’t seen before. The idea is that the <code>Graph</code> data type will have a
<code>Ptr</code> constructor that allows us to add an edge reference other parts
of the structure. The <code>Graph</code> type will be indexed by a ‘context’ that
specifies what <code>Ptr</code>s are valid.</p>
<p>Elements of <code>Graph</code> won’t correspond to general graphs exactly. We are
actually describing graphs that are “rooted, connected, directed and
edge-ordered with each node having out-degree 2”. It is possible to
choose different roots and orderings for the same graph, and these
choices will lead to different representations as elements of
<code>Graph</code>. The problem of determining whether two elements of <code>Graph</code>
have the same underlying actual graph seems like it would be difficult
in general.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell literate"><code class="sourceCode haskell"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ot">{-# OPTIONS_GHC -fno-warn-unticked-promoted-constructors #-}</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ot">{-# LANGUAGE DataKinds #-}</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="ot">{-# LANGUAGE PolyKinds #-}</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="ot">{-# LANGUAGE RankNTypes #-}</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="ot">{-# LANGUAGE TypeFamilies #-}</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="ot">{-# LANGUAGE TypeOperators #-}</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="ot">{-# LANGUAGE GADTs #-}</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell literate"><code class="sourceCode haskell"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">module</span> <span class="dt">Graphs</span> <span class="kw">where</span></span></code></pre></div>
<p>First, let us define a type describing the possible shapes of our data
structure. We will be using this at the type-level via DataKinds. Our
<code>Graph</code>s all have underlying binary trees.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell literate"><code class="sourceCode haskell"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">TreeShape</span> <span class="kw">where</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">LeafShape</span><span class="ot">    ::</span> <span class="dt">TreeShape</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">BinShape</span><span class="ot">     ::</span> <span class="dt">TreeShape</span> <span class="ot">-&gt;</span> <span class="dt">TreeShape</span> <span class="ot">-&gt;</span> <span class="dt">TreeShape</span></span></code></pre></div>
<p>There are also special leaves that are <code>Ptr</code>s to other locations.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode haskell literate"><code class="sourceCode haskell"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>  <span class="dt">PtrShape</span><span class="ot">     ::</span> <span class="dt">TreeShape</span></span></code></pre></div>
<p>And finally, we will need a way of blocking off a section of a graph
so that a <code>Ptr</code> can’t refer to it.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode haskell literate"><code class="sourceCode haskell"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>  <span class="dt">VoidShape</span><span class="ot">    ::</span> <span class="dt">TreeShape</span></span></code></pre></div>
<p>This won’t occur as the shape of an actual graph.</p>
<p>The next piece is an indexed type that, given a <code>TreeShape</code>, picks
out the location of a node in that shape. These will be what we use to
specify where in a tree a <code>Ptr</code> is pointing.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode haskell literate"><code class="sourceCode haskell"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">TreePosition</span> (<span class="ot">shape ::</span> <span class="dt">TreeShape</span>) <span class="kw">where</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">LeafPos</span><span class="ot">  ::</span> <span class="dt">TreePosition</span> <span class="dt">LeafShape</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">BinPos</span><span class="ot">   ::</span> <span class="dt">TreePosition</span> (<span class="dt">BinShape</span> s t)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">LeftPos</span><span class="ot">  ::</span> <span class="dt">TreePosition</span> s <span class="ot">-&gt;</span> <span class="dt">TreePosition</span> (<span class="dt">BinShape</span> s s')</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">RightPos</span><span class="ot"> ::</span> <span class="dt">TreePosition</span> s' <span class="ot">-&gt;</span> <span class="dt">TreePosition</span> (<span class="dt">BinShape</span> s s')</span></code></pre></div>
<p>There is, of course, no constructor for <code>TreePosition VoidShape</code>. We
also don’t allow <code>TreePosition PtrShape</code>, which means that <code>Ptr</code>s
will be required to point to genuine nodes in the tree, and not other
<code>Ptr</code>s. This avoids there being multiple ways of specifying the same
tree via chains of pointers, rather than having each <code>Ptr</code> target the
eventual node at the end of the chain.</p>
<p>We’ll need to be able to index type-level lists, so let’s get that out
of the way:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode haskell literate"><code class="sourceCode haskell"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Elem</span><span class="ot"> ::</span> k <span class="ot">-&gt;</span> [k] <span class="ot">-&gt;</span> <span class="op">*</span> <span class="kw">where</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">Here</span><span class="ot"> ::</span> <span class="dt">Elem</span> s (s <span class="op">:</span> c)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">There</span><span class="ot"> ::</span> <span class="dt">Elem</span> s c <span class="ot">-&gt;</span> <span class="dt">Elem</span> s (t <span class="op">:</span> c)</span></code></pre></div>
<p>Now for the actual graph type. The type is indexed both by the <code>shape</code>
of the underlying tree, and a <code>context</code>, a list of <code>TreeShape</code>s. As we
build a tree, this list is collecting the shapes of all the subtrees
used as a left branch of an earlier binary node.</p>
<p>Consider the following tree:</p>
<pre><code>             a
            / \
           /   \
          a     b
         / \   / \
        a   a b   *
               \
                b</code></pre>
<p>If we are currently defining the subtree to be placed at <code>*</code>, then the
<code>context</code> will consist of the two shapes</p>
<pre><code>                      a
         b           / \
        / \         /   \
  [    b   0  ,    a     0   ]
        \         / \
         b       a   a</code></pre>
<p>In the subtree to be placed at <code>*</code>, we may have pointers to <code>a</code>s or <code>b</code>s,
but not the <code>0</code>s.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode haskell literate"><code class="sourceCode haskell"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">Graph</span> (<span class="ot">context ::</span> [<span class="dt">TreeShape</span>]) (<span class="ot">shape ::</span> <span class="dt">TreeShape</span>) <span class="kw">where</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">Leaf</span><span class="ot"> ::</span> <span class="dt">Graph</span> c <span class="dt">LeafShape</span></span></code></pre></div>
<p>Leaves are easy, we can have a leaf in any context.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode haskell literate"><code class="sourceCode haskell"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>  <span class="dt">Ptr</span><span class="ot"> ::</span> <span class="dt">Elem</span> s context <span class="ot">-&gt;</span> <span class="dt">TreePosition</span> s <span class="ot">-&gt;</span> <span class="dt">Graph</span> context <span class="dt">PtrShape</span></span></code></pre></div>
<p>For the pointers, we pick a shape from the context and then a position
in that shape.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode haskell literate"><code class="sourceCode haskell"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>  <span class="dt">Bin</span><span class="ot"> ::</span> <span class="dt">Graph</span> (<span class="dt">BinShape</span> <span class="dt">VoidShape</span> <span class="dt">VoidShape</span> <span class="op">:</span> c) s</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>      <span class="ot">-&gt;</span> <span class="dt">Graph</span> (<span class="dt">BinShape</span> s <span class="dt">VoidShape</span> <span class="op">:</span> c) t</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>      <span class="ot">-&gt;</span> <span class="dt">Graph</span> c (<span class="dt">BinShape</span> s t)</span></code></pre></div>
<p>The interesting case is a binary node. In the left and right branches,
we push new trees onto the context c. When defining the left branch,
we only have access to one additional node over what is already in
<code>c</code>: the binary node we are currently defining. In the right branch,
we have access to the entire left branch: note that the shape <code>s</code> of
the left branch is what is pushed onto the context. This is why this
type has to be indexed over the shape of the resulting graph, not just
the context.</p>
<p>And that’s it! We can add labels to the nodes in the graph if we like,
by adding a parameter to the <code>Leaf</code> and <code>Bin</code> constructors.</p>
<p>Graphs of shape <code>s</code> then correspond to elements of <code>Graph '[] s</code>. If
we don’t care about having the shape as part of the type, we can
existentially quantify it.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode haskell literate"><code class="sourceCode haskell"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">AnyGraph</span> <span class="ot">=</span> <span class="kw">forall</span> s<span class="op">.</span> <span class="dt">AnyGraph</span> (<span class="dt">Graph</span> '[] s)</span></code></pre></div>
<p>Here are some simple graphs:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode haskell literate"><code class="sourceCode haskell"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ot">graph1 ::</span> <span class="dt">AnyGraph</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>graph1 <span class="ot">=</span> <span class="dt">AnyGraph</span> <span class="op">$</span> <span class="dt">Bin</span> (<span class="dt">Bin</span> <span class="dt">Leaf</span> <span class="dt">Leaf</span>) (<span class="dt">Bin</span> (<span class="dt">Ptr</span> (<span class="dt">There</span> <span class="op">$</span> <span class="dt">Here</span>) (<span class="dt">LeftPos</span> <span class="op">$</span> <span class="dt">LeftPos</span> <span class="op">$</span> <span class="dt">LeafPos</span>)) <span class="dt">Leaf</span>)</span></code></pre></div>
<p>Corresponding to</p>
<pre><code>     *
    / \
   /   \
  *     *
 / \   / \
*   * /   *
 \   /
  ---</code></pre>
<p>We can modify what kinds of graphs are representable by changing the
way the <code>context</code> is extended. Note that we can currently have cycles
in the graph:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode haskell literate"><code class="sourceCode haskell"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ot">graph2 ::</span> <span class="dt">AnyGraph</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>graph2 <span class="ot">=</span> <span class="dt">AnyGraph</span> <span class="op">$</span> <span class="dt">Bin</span> <span class="dt">Leaf</span> (<span class="dt">Ptr</span> <span class="dt">Here</span> <span class="dt">BinPos</span>)</span></code></pre></div>
<p>corresponds to</p>
<pre><code>    ---
   /   \
  *    /
 / \  /
*   --</code></pre>
<p>It’s not hard to change this though:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode haskell literate"><code class="sourceCode haskell"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">DAG</span> (<span class="ot">context ::</span> [<span class="dt">TreeShape</span>]) (<span class="ot">shape ::</span> <span class="dt">TreeShape</span>) <span class="kw">where</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">DAGLeaf</span><span class="ot"> ::</span> a <span class="ot">-&gt;</span> <span class="dt">DAG</span> c <span class="dt">LeafShape</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">DAGPtr</span><span class="ot"> ::</span> <span class="dt">Elem</span> s context <span class="ot">-&gt;</span> <span class="dt">TreePosition</span> s <span class="ot">-&gt;</span> <span class="dt">DAG</span> context <span class="dt">PtrShape</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">DAGBin</span><span class="ot"> ::</span> <span class="dt">DAG</span> c s <span class="ot">-&gt;</span> <span class="dt">DAG</span> (s <span class="op">:</span> c) t <span class="ot">-&gt;</span> <span class="dt">DAG</span> c (<span class="dt">BinShape</span> s t)</span></code></pre></div>
<p>The only difference is in the <code>DAGBin</code> constructor. Here, when
constructing the left branch, we are no longer permitted to reference
the current binary node. The same is true when constructing the right
branch, but we still give it access to the left branch. The result is
that every <code>Ptr</code> points to something to the left, other than a direct
ancestor of the current node. That is enough to rule out any cycles.</p>
<p>We have no need for <code>VoidShape</code> here, which is nice.</p>
            
        </div>
    </li>
    
    <li class="post-entry">
        <h1 class="post-list-title"><a href="../posts/clock.html">An Analog Digital Clock</a></h1>
        <p class="post-deets">February  3, 2017 / <a title="All pages tagged 'note-to-self'." href="../tags/note-to-self.html" rel="tag">note-to-self</a>, <a title="All pages tagged 'idea'." href="../tags/idea.html" rel="tag">idea</a></p>
        <div class="post-content">
            
            <canvas id="canvas">
</canvas>
<script type="text/javascript" src="../clock/clock.js">
</script>
            
        </div>
    </li>
    
    <li class="post-entry">
        <h1 class="post-list-title"><a href="../posts/catchy-songs.html">Catchy Songs</a></h1>
        <p class="post-deets">April 27, 2015 / <a title="All pages tagged 'note-to-self'." href="../tags/note-to-self.html" rel="tag">note-to-self</a>, <a title="All pages tagged 'music'." href="../tags/music.html" rel="tag">music</a>, <a title="All pages tagged 'rolling'." href="../tags/rolling.html" rel="tag">rolling</a></p>
        <div class="post-content">
            
            <p>I get songs stuck in my head for weeks at a time. I hope this list
will make for interesting reading when I am older. 
            <div class="continue-post"><a href="../posts/catchy-songs.html">Read post <svg class="chevron-icon"><use href="#icon-chevron-right"></use></svg></a></div>
            
        </div>
    </li>
    
    <li class="post-entry">
        <h1 class="post-list-title"><a href="../posts/epeen.html">Epeen Calculator</a></h1>
        <p class="post-deets">December 11, 2014 / <a title="All pages tagged 'note-to-self'." href="../tags/note-to-self.html" rel="tag">note-to-self</a>, <a title="All pages tagged 'games'." href="../tags/games.html" rel="tag">games</a></p>
        <div class="post-content">
            
            <p>A <a href="../epeen/index.html">dumb joke</a> that translates your Dota 2 MMR (as
of 2016) into to a certain anatomical measurement. Written in Elm to
try the language out, I didn’t come away a fan.</p>
            
        </div>
    </li>
    
</ul>





</section>


        <footer>
          Please <a href="mailto:mitchell.v.riley@gmail.com">email</a> me any comments or suggestions. Site built using <a href="https://jaspervdj.be/hakyll/">Hakyll</a><!-- , source on <a href="https://github.com/mvr/blog">Github</a> -->. <!-- Some design elements cribbed from <a href="https://github.com/coletownsend/balzac-for-jekyll">Cole Townsend</a>. -->
        </footer>

    </body>
</html>
